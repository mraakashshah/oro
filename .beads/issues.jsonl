{"id":"oro-01h","title":"Hook: post-commit discovery reminder","description":"PostToolUse hook for git commit. After feat/fix commits, remind to log to docs/decisions-and-discoveries.md if not already staged. Light reminder, not blocker.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:17:18.453474-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:43:22.426393-05:00","closed_at":"2026-02-07T21:43:22.426393-05:00","close_reason":"PostToolUse reminder hook landed with tests"}
{"id":"oro-06v","title":"Hook: SubagentStop validation (worktree + commit + bead status)","description":"SubagentStop hook that verifies when a Task-tool supervisor finishes: (1) worktree exists, (2) no uncommitted changes, (3) branch pushed to remote, (4) bead status updated. Warns on failures rather than hard-blocking (fail open). Complements existing pre-Task worktree enforcement. Acceptance: dispatched agent that skips push or leaves dirty worktree triggers warning in hook output.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:58:48.972752-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:15:42.821661-05:00","closed_at":"2026-02-07T20:15:42.821661-05:00","close_reason":"Tests pass, gate clean. Commit: d4a5758","comments":[{"id":1,"issue_id":"oro-06v","author":"Aakash Shah","text":"LEARNED: Never chain rebase+merge for multiple agent branches in one command. Do them one at a time: (1) stash dirty state, (2) rebase one branch onto main, (3) ff-only merge, (4) repeat for next branch, (5) stash pop. Also remove worktrees BEFORE attempting rebase — git rebase fails if the branch is checked out in any worktree. The safe sequence is: git worktree remove --force, then git stash, then git rebase main \u003cbranch\u003e, then git merge --ff-only \u003cbranch\u003e, then git branch -d \u003cbranch\u003e.","created_at":"2026-02-08T01:25:48Z"}]}
{"id":"oro-0q5","title":"Implement: memory system (SQLite tables + extraction pipeline + prompt injection)","description":"Core memory system from the memory spec. Covers: (1) SQLite memories + memories_fts tables (CREATE TABLE + FTS5 virtual table). (2) Worker self-report marker extraction — Go code that monitors claude -p stdout for [MEMORY] lines and INSERTs to memories table. (3) Daemon post-session extraction — regex patterns (I learned, Note:, Gotcha:, Pattern:) applied to session logs. (4) Prompt injection — query memories by tag overlap + BM25 + time decay, inject top 3 into bead prompt (200 token cap). (5) Periodic consolidation — dedup by FTS5 similarity, merge related, prune low-confidence stale entries. Reference: docs/plans/2026-02-07-memory-system-spec.md","notes":"Fixed oro-3w4 test failures. Added: write-time dedup (Jaccard threshold 0.7), ForPrompt aligned with search spec (5 memories/500 tokens), FTS5 OR-join for broader recall, Go-side scoring (bm25 unreliable in modernc), refactored Search/List for lint compliance. All 19 tests pass, 0 lint issues.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:25:28.196703-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:26:39.606744-05:00","closed_at":"2026-02-08T01:26:39.606744-05:00","close_reason":"All 19 tests pass, lint clean, coverage 91.9%. Memory system complete: SQLite tables, FTS5 search, extraction pipeline, ForPrompt injection, Jaccard dedup.","dependencies":[{"issue_id":"oro-0q5","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:20.363224-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-0q5","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.028365-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-1s5","title":"Architectural review: verify all specs cohere before implementation","description":"After oro-seg (memory search) and oro-w2u (code search) specs are complete, verify the full architecture hangs together: IPC comparison, manager redesign, memory system spec, lifecycle doc, code search spec, memory search spec. Check for contradictions, gaps, undefined interfaces between components. Verify the shared protocol package (oro-q63/bya/v6f) will actually serve what the specs need. Output: list of issues found, or green light to proceed with implementation.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T18:20:08.433932-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:48:29.206-05:00","closed_at":"2026-02-07T18:48:29.206-05:00","close_reason":"Arch review written to docs/plans/2026-02-07-arch-review.md","dependencies":[{"issue_id":"oro-1s5","depends_on_id":"oro-seg","type":"blocks","created_at":"2026-02-07T18:20:19.781433-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-1s5","depends_on_id":"oro-w2u","type":"blocks","created_at":"2026-02-07T18:20:19.867243-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-1s7","title":"Design: resolve remaining open questions (merge protocol, reconnection, ralph handoff, context detection, bead prompts, two-stage review)","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:20.136029-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T04:58:44.181593-05:00","closed_at":"2026-02-07T04:58:44.181593-05:00","close_reason":"All 6 design questions resolved: merge protocol, reconnection, ralph handoff, context detection, bead prompt construction, two-stage review"}
{"id":"oro-2jb","title":"Implement: shared protocol package (UDS message types + SQLite schema + Go types)","description":"Define the shared Go types and schemas that Dispatcher, Worker, and CLI all depend on. Includes: (1) UDS protocol: line-delimited JSON message types (ASSIGN, DONE, HEARTBEAT, HANDOFF, RECONNECT, SHUTDOWN, STATUS, READY_FOR_REVIEW). (2) SQLite schema: events, assignments, commands, memories, memories_fts tables. (3) Go types for all message structs, SQLite row structs, and directive types (start/stop/pause/focus). This is a thin package — types and schema only, no business logic. Unblocks parallel development of Dispatcher, Worker, and CLI.","status":"closed","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:25:21.120741-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T17:31:36.598167-05:00","closed_at":"2026-02-07T17:31:36.598167-05:00","close_reason":"Decomposed into sub-beads: oro-6dq, oro-q63, oro-bya, oro-ef8, oro-v6f","dependencies":[{"issue_id":"oro-2jb","depends_on_id":"oro-fza","type":"blocks","created_at":"2026-02-07T15:47:24.523959-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-2md","title":"Hook: brainstorming research guard","description":"Evaluate whether brainstorming research enforcement is better as a hook or skill discipline. If hook: verify reference file reads happened before design proposals. May be too hard to enforce mechanically.","status":"closed","priority":4,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:17:18.546952-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:42:59.11048-05:00","closed_at":"2026-02-07T21:42:59.11048-05:00","close_reason":"Decided skill-only (no hook). Hook not viable: proposals are text output not tool calls, 'sufficient research' requires judgment, false positives on Edit/Write overwhelming. Strengthened brainstorming skill with mandatory research gate checklist, sufficiency table, self-check question. Documented decision in decisions-and-discoveries.md."}
{"id":"oro-3w4","title":"Fix memory system test failures (ForPrompt, Consolidate)","description":"3 test failures in pkg/memory: TestForPrompt (FTS5 search returns empty), TestConsolidate_MergesDuplicates (similarity search not matching), TestConsolidate_DryRun (depends on List NULL fix). Root cause: FTS5 query sanitization added but bm25()/POWER() may not work with modernc.org/sqlite. Debug the actual SQL errors.","status":"closed","priority":2,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:03:09.117839-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:56.832803-05:00","closed_at":"2026-02-08T01:05:56.832803-05:00","close_reason":"FTS5 compat with modernc.org/sqlite — OR queries, Go-side scoring, write-time Jaccard dedup"}
{"id":"oro-66l","title":"Merge and lint-fix oro-w6n dispatcher package","description":"Dispatcher agent (oro-w6n) built pkg/dispatcher/ in worktree. Needs: rebase onto main, ff-only merge, golangci-lint fixes, full test suite verification.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:03:09.24167-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T23:12:21.19132-05:00","closed_at":"2026-02-07T23:12:21.19132-05:00","close_reason":"Merged dispatcher to main at 164ca9e"}
{"id":"oro-68t","title":"Implement: merge coordinator (sequential rebase-merge with lock, P0 on conflict)","description":"Go package implementing merge coordinator logic, integrated by the Dispatcher binary. Covers: (1) Merge lock acquisition/release. (2) Sequential rebase-merge: git rebase main → git merge --ff-only. (3) Conflict detection: rebase --abort on conflict → delegate to ops agent. (4) Merge context: read both beads' annotations to understand both sides. (5) Escalation: if ops agent resolution fails (tests still fail), escalate to Manager via tmux send-keys. This is a library package used by oro-w6n (Dispatcher), not a standalone binary. Reference: R1 merge protocol in docs/plans/2026-02-07-orchestrator-ipc-comparison.md","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:30.374242-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:23:31.854298-05:00","closed_at":"2026-02-07T22:23:31.854298-05:00","close_reason":"Implemented merge coordinator in pkg/merge/ with Coordinator struct (mutex lock, rebase-merge, conflict detection via ConflictError), GitRunner interface + ExecGitRunner default, and 8 passing tests including concurrency and context cancellation.","dependencies":[{"issue_id":"oro-68t","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.833555-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-6dq","title":"Protocol: UDS message types (Go structs + JSON tags + enum)","description":"Define all UDS message type constants and Go structs in pkg/protocol/message.go. Types: ASSIGN, SHUTDOWN, HEARTBEAT, STATUS, HANDOFF, DONE, READY_FOR_REVIEW, RECONNECT. Each struct gets json tags. Envelope Message struct with Type field for dispatch. Test: go test ./pkg/protocol/... -run TestMessage -v. Acceptance: all message types round-trip through JSON marshal/unmarshal.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:14.132148-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T17:54:09.825348-05:00","closed_at":"2026-02-07T17:54:09.825348-05:00","close_reason":"Completed: message types, payload structs, JSON round-trip tests all passing","dependencies":[{"issue_id":"oro-6dq","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.647811-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-773","title":"Implement: Worker Go binary (UDS client + claude -p subprocess + heartbeat + handoff)","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:25.302605-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:26:23.057614-05:00","closed_at":"2026-02-07T22:26:23.057614-05:00","close_reason":"Implemented Worker Go package at pkg/worker/ with UDS client, subprocess spawning via SubprocessSpawner interface, heartbeat/status/done/handoff/reconnect messaging, context file watcher with handoff at \u003e70%, message buffering during disconnection, and reconnection with jitter. All 11 tests pass, go vet clean.","dependencies":[{"issue_id":"oro-773","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.676074-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-773","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:05.651582-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-773","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.107798-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-7ya","title":"Merge and lint-fix oro-0q5 memory package","description":"Memory agent (oro-0q5) built pkg/memory/ in worktree. Needs: fix 3 remaining test failures (oro-3w4), rebase onto main, ff-only merge, golangci-lint fixes.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:03:09.365319-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:56.914657-05:00","closed_at":"2026-02-08T01:05:56.914657-05:00","close_reason":"Memory package merged to main, lint clean, 91.9% coverage, quality gate passing","dependencies":[{"issue_id":"oro-7ya","depends_on_id":"oro-3w4","type":"blocks","created_at":"2026-02-07T23:03:24.244812-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98h","title":"Enforce quality gate at worker level before MsgDone (block merge on failure)","description":"Workers must run quality_gate.sh and pass before sending MsgDone. (1) Add QualityGatePassed bool to DonePayload. (2) Worker bead prompt template must include 'run ./quality_gate.sh before completing'. (3) Dispatcher rejects merge if QualityGatePassed=false — logs warning, reassigns bead. (4) Ops review agent only triggered AFTER gate passes. This pushes all build/test/lint work to workers and keeps the manager/dispatcher path clean. Ref: quality_gate.sh (18 checks), pkg/protocol/message.go (DonePayload), pkg/dispatcher/dispatcher.go (merge trigger), pkg/worker/worker.go (done flow).","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:08:46.569375-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:31:09.671181-05:00","closed_at":"2026-02-08T01:31:09.671181-05:00","close_reason":"Implemented quality gate enforcement at worker level: added QualityGatePassed bool to DonePayload, worker prompt includes quality_gate.sh instruction, dispatcher rejects merge and reassigns bead when gate fails, RunQualityGate() helper added. All tests pass with race detector, linter clean."}
{"id":"oro-98q","title":"Epic: Code search hook (day-one MVP — TLDR read enforcer for Go files)","description":"Day-one code search: Go binary hook that intercepts PreToolUse Read calls, applies bypass rules, and returns go/ast structure summaries instead of raw file content. Target: 90%+ token savings on Go files \u003e100 lines. Spec: docs/plans/2026-02-07-code-search-spec.md","acceptance_criteria":"All child beads closed. golangci-lint clean. go test -race ./... passes. Hook binary compiles and is registered in settings.json.","status":"open","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:24.552714-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T00:44:24.552714-05:00"}
{"id":"oro-98q.1","title":"Implement bypass rules for Read hook (small files, config, tests, offset/limit)","description":"Create pkg/codesearch/bypass.go with ShouldBypass(toolInput) bool. Bypass conditions from spec: files \u003c3KB (~100 lines), non-code files (JSON, YAML, MD, toml), test files (*_test.go), explicit offset/limit in Read call, files in .claude/ directory. Pure function, no side effects.","acceptance_criteria":"Test: pkg/codesearch/bypass_test.go:TestShouldBypass | Cmd: go test -race ./pkg/codesearch/... -run TestShouldBypass -v | Assert: bypasses small files, config files, test files, offset/limit reads, .claude/ paths; intercepts large Go source files","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:37.467377-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:42:59.912465-05:00","closed_at":"2026-02-08T01:42:59.912465-05:00","close_reason":"ShouldBypass pure function with 19 test cases. Bypasses small files \u003c3KB, configs, tests, offset/limit, .claude/ paths.","dependencies":[{"issue_id":"oro-98q.1","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:37.468401-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98q.2","title":"Implement Go AST summarizer (structure mode via go/ast)","description":"Create pkg/codesearch/summarize.go with Summarize(filePath string) (string, error). Uses go/ast to parse Go files and extract: package name, imports, function signatures (with params + return types + line numbers), type declarations (structs with fields, interfaces with methods), const/var blocks. Output is compact text format with line numbers. Target: 90%+ token reduction vs raw file. No external dependencies — go/ast stdlib only.","acceptance_criteria":"Test: pkg/codesearch/summarize_test.go:TestSummarize | Cmd: go test -race ./pkg/codesearch/... -run TestSummarize -v | Assert: summarizes a 200+ line Go file to \u003c10% of original token count; includes all exported function signatures, type declarations, and line numbers; returns error for non-Go files","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:41.678078-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:43:00.009034-05:00","closed_at":"2026-02-08T01:43:00.009034-05:00","close_reason":"Summarize via go/ast: function sigs, types, consts/vars with line numbers. 90%+ token reduction. All tests pass, lint clean.","dependencies":[{"issue_id":"oro-98q.2","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:41.678811-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98q.3","title":"Implement hook binary entry point (oro-search-hook main.go)","description":"Create cmd/oro-search-hook/main.go. Reads PreToolUse JSON from stdin, checks tool_name=='Read', calls ShouldBypass — if bypass returns allow ({}). Otherwise calls Summarize on the file_path, returns JSON with permissionDecision:'deny' and permissionDecisionReason containing the summary. For non-Read tools or Grep (day-two), returns allow. Handles errors gracefully (if summarize fails, allow the read through rather than blocking).","acceptance_criteria":"Test: cmd/oro-search-hook/main_test.go:TestHookDispatch | Cmd: go test -race ./cmd/oro-search-hook/... -v | Assert: returns deny+summary for large Go file Read; returns allow for small file Read; returns allow for non-Read tools; returns allow on summarize error","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:53.269098-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:53:28.535985-05:00","closed_at":"2026-02-08T01:53:28.535985-05:00","close_reason":"Implemented oro-search-hook binary: HandleHook dispatches PreToolUse JSON, denies with AST summary for large Go Read calls, allows bypass cases and non-Read tools, fail-open on errors. 11 table-driven tests pass with -race, 0 linter issues.","dependencies":[{"issue_id":"oro-98q.3","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:53.269932-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-98q.3","depends_on_id":"oro-98q.1","type":"blocks","created_at":"2026-02-08T00:45:02.23575-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-98q.3","depends_on_id":"oro-98q.2","type":"blocks","created_at":"2026-02-08T00:45:02.318566-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98q.4","title":"Wire hook: build target + settings.json registration + integration test","description":"Add Makefile target to compile oro-search-hook and place binary in .claude/hooks/. Register hook in .claude/settings.json for PreToolUse events with 5s timeout. Write integration test that compiles the binary, feeds it realistic PreToolUse JSON via stdin pipe, and asserts correct output. Verify the compiled binary works end-to-end with a real Go source file.","acceptance_criteria":"Test: cmd/oro-search-hook/integration_test.go:TestHookEndToEnd | Cmd: make build-search-hook \u0026\u0026 go test -race ./cmd/oro-search-hook/... -run TestHookEndToEnd -v | Assert: compiled binary produces deny+summary for large Go file, allow for small file; settings.json has correct hook registration","status":"open","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:55.053949-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T00:44:55.053949-05:00","dependencies":[{"issue_id":"oro-98q.4","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:55.054722-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-98q.4","depends_on_id":"oro-98q.3","type":"blocks","created_at":"2026-02-08T00:45:02.407922-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-a9r","title":"Hook: improve session-start — stale work, merged PR cleanup, recent learnings","description":"Enhance existing session-start hook (bd prime) to: (1) detect merged PRs with uncleaned worktrees and suggest cleanup commands, (2) surface stale beads (no activity \u003e3 days), (3) show 5 most recent LEARNED entries from knowledge.jsonl if it exists. Acceptance: session start shows actionable cleanup suggestions and recent learnings alongside existing bd ready output.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:58:49.928684-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:18:07.939269-05:00","closed_at":"2026-02-07T20:18:07.939269-05:00","close_reason":"Tests pass, gate clean. Commit: c92f5f6","dependencies":[{"issue_id":"oro-a9r","depends_on_id":"oro-rez","type":"blocks","created_at":"2026-02-07T19:58:58.043279-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-aa0","title":"Spec: AST-based code search for workers (TLDR stack pattern)","description":"Workers need token-efficient code search. CC-v3 TLDR stack: 5-layer analysis (AST, Call Graph, CFG, DFG, PDG) = 95% token savings (~1,200 vs 23,000 tokens). tldr-read-enforcer hook intercepts Read tool, returns L1+L2+L3 instead of raw files. Prior art in yap/reference/Continuous-Claude-v3/.claude/ (hooks, servers/ast-grep/). Need to decide: adopt TLDR approach, use ast-grep MCP, or simpler tree-sitter integration in Go. This is about worker efficiency — keeping context small so ralph cycles are less frequent.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T12:31:17.28325-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T13:03:59.840462-05:00","closed_at":"2026-02-07T13:03:59.840462-05:00","close_reason":"Superseded by oro-w2u (broader scope) and oro-o7r (Manager role change)","dependencies":[{"issue_id":"oro-aa0","depends_on_id":"oro-w6n","type":"blocks","created_at":"2026-02-07T12:31:37.658993-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-adw","title":"Extend HandoffPayload with typed context (learnings, decisions, files)","description":"Extend protocol.HandoffPayload to include Learnings []string, Decisions []string, FilesModified []string, ContextSummary string. Worker populates these before sending MsgHandoff. Dispatcher persists to memories table via memory.Store.Insert(). On next MsgAssign for same bead, dispatcher calls memory.ForPrompt() and includes result in AssignPayload (new field: MemoryContext string). Ref: pkg/protocol/message.go, pkg/worker/worker.go (handleMessage + handoff logic around line 250), pkg/dispatcher/dispatcher.go (assign logic), pkg/memory/memory.go (ForPrompt, Insert).","acceptance_criteria":"Test: pkg/protocol/message_test.go:TestHandoffPayloadFields + pkg/worker/worker_test.go:TestHandoffPopulatesContext | Cmd: go test -race ./pkg/protocol/... ./pkg/worker/... ./pkg/dispatcher/... | Assert: HandoffPayload marshals with new fields; worker fills context before sending; dispatcher persists learnings as memories; reassign includes ForPrompt output","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:17.495249-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:33:37.67279-05:00","closed_at":"2026-02-08T01:33:37.67279-05:00","close_reason":"Extended HandoffPayload with Learnings, Decisions, FilesModified, ContextSummary fields. Worker reads .oro/ context files before handoff. Dispatcher persists learnings/decisions as memories via memory.Store.Insert(). AssignPayload gains MemoryContext field populated by memory.ForPrompt(). All tests pass with -race, zero lint issues."}
{"id":"oro-b9m","title":"Update dispatching-parallel-agents skill from swarm spec (worktrees + agent commits)","description":"Update .claude/skills/dispatching-parallel-agents/SKILL.md to implement the Claude agents tier from docs/plans/2026-02-07-agent-swarm-spec.md. Key changes: (1) worktree per agent by default, (2) agents always commit on their branch, (3) manager merges ff-only, (4) agent prompt template with worktree path + commit instructions, (5) cleanup step. Remove the 'don't commit' constraint. Reference the swarm spec for rationale.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:12:46.463057-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T19:14:13.533725-05:00","closed_at":"2026-02-07T19:14:13.533725-05:00","close_reason":"Skill rewritten with worktree isolation, agent commits, manager ff-only merge"}
{"id":"oro-bat","title":"Wire memory injection into dispatcher assign (ForPrompt in AssignPayload)","description":"When dispatcher assigns a bead to a worker, call memory.ForPrompt() with the bead's tags and description, include the result in AssignPayload.MemoryContext. Worker injects this into the claude -p prompt. Requires: AssignPayload gets MemoryContext string field. Dispatcher needs memory.Store instance. Ref: pkg/dispatcher/dispatcher.go (assign logic), pkg/protocol/message.go (AssignPayload), pkg/memory/memory.go (ForPrompt).","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestAssignIncludesMemories | Cmd: go test -race ./pkg/dispatcher/... | Assert: assign payload for bead with related memories includes non-empty MemoryContext","status":"open","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:30.986703-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:30.986703-05:00","dependencies":[{"issue_id":"oro-bat","depends_on_id":"oro-yfs","type":"blocks","created_at":"2026-02-08T01:05:42.762206-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-bya","title":"Protocol: SQLite row types (Go structs for each table)","description":"Define Go structs matching each SQLite table in pkg/protocol/tables.go. Structs: Event, Assignment, Command, Memory. Fields match schema columns with appropriate Go types. Test: go test ./pkg/protocol/... -run TestTable -v. Acceptance: struct fields match schema columns, JSON tags on Memory.Tags.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:30.037123-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:55:43.834342-05:00","closed_at":"2026-02-07T21:55:43.834342-05:00","close_reason":"4 row types with 8 tests, all matching schema DDL columns","dependencies":[{"issue_id":"oro-bya","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.803784-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-bya","depends_on_id":"oro-q63","type":"blocks","created_at":"2026-02-07T17:31:02.681533-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-dxu","title":"Comprehensive quality gate: add shellcheck, markdownlint, yamllint, biome, go-arch-lint, pyright, pylint","description":"Expand quality_gate.sh to cover all project tools. Plan at ~/.claude/plans/piped-nibbling-gosling.md. Decisions: biome for JSON, go-arch-lint with layers now, markdownlint lenient. Create .markdownlint.yml, .go-arch-lint.yml. Add shell/docs/python tiers. Scope all checks to exclude references/, yap/, archive/.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T16:43:20.103788-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T16:48:38.036548-05:00","closed_at":"2026-02-07T16:48:38.036548-05:00","close_reason":"13/13 checks pass. Commit: c4c46cf"}
{"id":"oro-ef8","title":"Protocol: directive types (enum + command struct)","description":"Define Directive enum (start/stop/pause/focus) and related types in pkg/protocol/directive.go. Test: go test ./pkg/protocol/... -run TestDirective -v. Acceptance: directive constants defined, Command struct matches commands table.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:34.217696-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T17:53:18.630934-05:00","closed_at":"2026-02-07T17:53:18.630934-05:00","close_reason":"Completed: directive.go with Directive enum, Command struct, Valid() method. 3/3 tests passing.","dependencies":[{"issue_id":"oro-ef8","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.881412-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-fza","title":"Foundation: Go module + CI pipeline + quality gate script","description":"Set up the project foundation before any feature bead can execute. Covers: (1) Go module init (go mod init, directory structure: cmd/, internal/, pkg/). (2) CI pipeline (GitHub Actions: go test, go vet, golangci-lint, biome for JSON/YAML). (3) Quality gate script (ad_hoc/quality_gate.sh — runs all checks locally, same as CI). (4) Makefile or taskfile with standard targets (build, test, lint, fmt). (5) First passing test (trivial, proves CI works end-to-end). This bead must pass CI before any feature bead starts. No feature code — just scaffolding.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:47:18.13366-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T16:32:47.234951-05:00","closed_at":"2026-02-07T16:32:47.234951-05:00","close_reason":"Tests pass, lint clean, CI yaml ready. Commit: db91516"}
{"id":"oro-gys","title":"Audit and consolidate .claude/skills — remove duplicates, merge overlapping skills","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:12:39.868019-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T15:13:24.384203-05:00","closed_at":"2026-02-07T15:13:24.384203-05:00","close_reason":"Wrong scope — issue was about slash commands, not skills"}
{"id":"oro-hh0","title":"Implement graceful shutdown protocol (PrepareShutdown → save → ShutdownApproved)","description":"Add MsgPrepareShutdown (dispatcher→worker) and MsgShutdownApproved (worker→dispatcher). Flow: (1) Dispatcher sends MsgPrepareShutdown with timeout. (2) Worker saves context — populates HandoffPayload with learnings/decisions, sends MsgHandoff, then sends MsgShutdownApproved. (3) Dispatcher waits up to timeout for approval, then kills. If worker doesn't respond within timeout, hard kill (existing MsgShutdown behavior). Ref: pkg/protocol/message.go, pkg/worker/worker.go (Run loop, MsgShutdown case), pkg/dispatcher/dispatcher.go (shutdown flow). Pattern from: cs50victor/claude-code-teams-mcp ShutdownRequest/ShutdownApproved.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestGracefulShutdown | Cmd: go test -race ./pkg/worker/... ./pkg/dispatcher/... | Assert: worker responds to PrepareShutdown by saving context and sending ShutdownApproved; dispatcher waits for approval before kill; hard kill after timeout","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:23.964639-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:54:22.160746-05:00","closed_at":"2026-02-08T01:54:22.160746-05:00","close_reason":"Implemented graceful shutdown protocol: MsgPrepareShutdown (dispatcher-\u003eworker) and MsgShutdownApproved (worker-\u003edispatcher). Worker responds by saving context via HandoffPayload, sending ShutdownApproved, then killing subprocess. Dispatcher waits for approval or falls back to hard kill on timeout. All tests pass, zero lint issues.","dependencies":[{"issue_id":"oro-hh0","depends_on_id":"oro-adw","type":"blocks","created_at":"2026-02-08T01:05:42.60271-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-i59","title":"Verify coverage agents and push (merge, worker, dispatcher test coverage to 90%)","description":"3 coverage agents running in background (merge a029c50, worker a804b0b, dispatcher ad56af2). Each writes tests to *_test.go in their package. After all complete: verify 90%+ total coverage, run golangci-lint, commit tests, then push. Quality gate now requires 90% min coverage and combines race+coverage in one run.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:20:53.990446-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T23:39:21.69494-05:00","closed_at":"2026-02-07T23:39:21.69494-05:00","close_reason":"Coverage at 93.1%, all packages above 90% minimum"}
{"id":"oro-jlz","title":"Investigate bash tool death after worktree removal","description":"Bash tool becomes completely non-functional (every command returns exit code 1, no output) after git worktree remove --force when the shell's cwd was inside or related to the removed worktree. Happened twice this session: (1) after worktree removal + failed git rebase chain, (2) after worktree removal inside a chained command. Only recovers after user intervention (likely /clear or session restart). Root cause unknown — could be shell cwd invalidation, hook interaction, or sandbox state corruption. Need to reproduce reliably and add a safeguard. Workaround: never remove a worktree in a chained command — do it standalone, then verify bash works before continuing.","status":"closed","priority":0,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T20:55:04.18538-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:36:05.974142-05:00","closed_at":"2026-02-07T21:36:05.974142-05:00","close_reason":"Hook guard + skill update landed. PreToolUse blocks dangerous worktree removal. 26 tests."}
{"id":"oro-ldf","title":"Epic: Embedding-based memory retrieval (local embeddings + SQLite + hybrid RRF search)","description":"BCR strategy: local embeddings at write time, store as BLOB in SQLite memories table (column already reserved), cosine similarity at read time. Combine with FTS5 BM25 via CC-v3 hybrid RRF scoring: Score = 1/(60+text_rank) + 1/(60+vector_rank). Subtasks: research Go embedding libraries, select model + dimensions, implement embed-on-INSERT, implement cosine similarity search, calibrate RRF weights. Depends on core memory table existing (oro-w6n).","status":"closed","priority":3,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T12:27:13.256312-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:33:45.110605-05:00","closed_at":"2026-02-08T01:33:45.110605-05:00","close_reason":"Implemented embedding-based semantic search: TF-IDF embedder (pure Go), embed-on-INSERT, cosine similarity, hybrid RRF search (FTS5+vector), 26 new tests, 92.6% coverage, linter clean","dependencies":[{"issue_id":"oro-ldf","depends_on_id":"oro-w6n","type":"blocks","created_at":"2026-02-07T12:27:31.399178-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-mak","title":"Refactor Worker.Run to reduce cognitive complexity (currently 26, limit 20)","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:20:58.921098-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:56.751212-05:00","closed_at":"2026-02-08T01:05:56.751212-05:00","close_reason":"Worker.Run complexity 26→7 via readMessages() and handleConnectionError() extraction"}
{"id":"oro-o7r","title":"Redesign: Manager is a Claude session, not a Go binary — update orchestrator architecture","description":"Previous design (docs/plans/2026-02-07-orchestrator-ipc-comparison.md) assumed Manager = Go binary with UDS server. Actual intent: Manager is a Claude session that coordinates workers, gatekeeps merges, handles cleanup/relaunch. Architect is separate interactive session for planning/speccing. This affects: (1) IPC design — Claude sessions don't natively speak UDS, may still need thin Go/binary wrappers for lifecycle but Manager itself is Claude. (2) All downstream beads: oro-w6n, oro-773, oro-r7b, oro-68t. (3) Manager now needs code search tools (full stack) for merge review. May still want daemons/binaries for plumbing, but they serve the Manager session, not replace it.","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T13:02:52.24744-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T14:16:21.366388-05:00","closed_at":"2026-02-07T14:16:21.366388-05:00","close_reason":"Redesign complete. Manager is Claude session, Dispatcher is Go binary. Three docs updated: manager-redesign.md (new), oro-lifecycle.md (new), orchestrator-ipc-comparison.md (marked historical). All downstream beads updated."}
{"id":"oro-on7","title":"Spec: Agent swarm patterns — parallel agents with git worktrees, commits, and coordination","description":"Current dispatching-parallel-agents skill is too light: agents can't commit, no worktree isolation, no coordination protocol. Need to spec swarm patterns that allow parallel agents to: (1) work in isolated worktrees, (2) commit independently, (3) merge results back to main without conflicts, (4) coordinate when tasks have dependencies. Reference: Oro's own Worker model (worktree per worker), CC-v3's parallel agent contracts, compound-eng's resolve_parallel command. Should cover: worktree lifecycle, commit policy (agent commits vs manager commits), merge strategy (ff-only vs rebase), conflict resolution, and how this maps to the dispatching-parallel-agents skill update.","status":"closed","priority":1,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T18:53:47.403645-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:59:09.861112-05:00","closed_at":"2026-02-07T18:59:09.861112-05:00","close_reason":"Spec written to docs/plans/2026-02-07-agent-swarm-spec.md"}
{"id":"oro-q63","title":"Protocol: SQLite schema DDL (embedded SQL string)","description":"Define schema DDL as embedded Go string constants in pkg/protocol/schema.go. Tables: events, assignments, commands, memories, memories_fts (FTS5). Test: go test ./pkg/protocol/... -run TestSchema -v. Acceptance: DDL string parses as valid SQL (exec against in-memory SQLite).","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:25.730068-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:34:31.79692-05:00","closed_at":"2026-02-07T20:34:31.79692-05:00","close_reason":"Tests pass, 3 tests (exec, tables, idempotent). Commit: a550b42","dependencies":[{"issue_id":"oro-q63","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.726436-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-q63","depends_on_id":"oro-1s5","type":"blocks","created_at":"2026-02-07T18:20:19.94731-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b","title":"Implement: oro CLI (start/stop/status, directives, remember/recall commands)","description":"Oro CLI — single binary for session orchestration (tmux layout, daemon, manager/architect sessions) and memory interface (remember/recall). Spec: docs/plans/2026-02-08-oro-cli-spec.md","status":"open","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:26.367571-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:19:18.345001-05:00","dependencies":[{"issue_id":"oro-r7b","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.75552-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:10.356158-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.186671-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b","depends_on_id":"oro-98h","type":"blocks","created_at":"2026-02-08T01:08:57.627901-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.1","title":"CLI scaffold: cobra commands (start/stop/status/remember/recall)","acceptance_criteria":"Test: cmd/oro/main_test.go:TestCLICommands | Cmd: go test -race ./cmd/oro/... | Assert: all subcommands parse flags correctly, --help works","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:36.907018-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:53:36.097606-05:00","closed_at":"2026-02-08T01:53:36.097606-05:00","close_reason":"CLI scaffold complete: root cmd with --version, 5 subcommands (start/stop/status/remember/recall), cobra flags, 17 tests passing, 0 lint issues","dependencies":[{"issue_id":"oro-r7b.1","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:36.907791-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.2","title":"Daemon launcher: PID file, start/stop/health check, SIGTERM handler","acceptance_criteria":"Test: cmd/oro/daemon_test.go:TestDaemonLifecycle | Cmd: go test -race ./cmd/oro/... -run TestDaemon | Assert: starts dispatcher, writes PID, stops on SIGTERM, cleans PID file","status":"open","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.015517-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:19:37.015517-05:00","dependencies":[{"issue_id":"oro-r7b.2","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.016205-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.2","depends_on_id":"oro-r7b.1","type":"blocks","created_at":"2026-02-08T01:19:47.883656-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.3","title":"tmux session manager: create oro session, split panes, launch architect+manager","acceptance_criteria":"Test: cmd/oro/tmux_test.go:TestTmuxLayout | Cmd: go test -race ./cmd/oro/... -run TestTmux | Assert: creates session with 2 panes, attaches, kills on stop","status":"open","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.126759-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:19:37.126759-05:00","dependencies":[{"issue_id":"oro-r7b.3","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.127432-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.3","depends_on_id":"oro-r7b.1","type":"blocks","created_at":"2026-02-08T01:19:47.973729-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.4","title":"Manager prompt: autonomous bead execution loop with quality gate enforcement","acceptance_criteria":"Test: cmd/oro/manager_test.go:TestManagerPrompt | Cmd: go test -race ./cmd/oro/... -run TestManager | Assert: prompt includes bd ready loop, quality gate check, never-stop instruction","status":"open","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.234957-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:19:37.234957-05:00","dependencies":[{"issue_id":"oro-r7b.4","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.2357-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.4","depends_on_id":"oro-r7b.3","type":"blocks","created_at":"2026-02-08T01:19:48.062127-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.5","title":"Remember/recall commands: wire memory.Store to CLI subcommands","acceptance_criteria":"Test: cmd/oro/memory_test.go:TestRememberRecall | Cmd: go test -race ./cmd/oro/... -run TestRemember | Assert: remember inserts to SQLite, recall searches FTS5","status":"open","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.340622-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:19:37.340622-05:00","dependencies":[{"issue_id":"oro-r7b.5","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.341302-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.5","depends_on_id":"oro-r7b.1","type":"blocks","created_at":"2026-02-08T01:19:48.152165-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-rez","title":"Hook: LEARNED memory capture via bd comment","description":"PostToolUse hook that intercepts 'bd comment \u003cid\u003e LEARNED: ...' commands. Extracts structured entries into .beads/memory/knowledge.jsonl with auto-tagging, deduplication by key, and timestamp. Session-start surfaces recent learnings. Inspired by The-Claude-Protocol's memory-capture.sh. Acceptance: bd comment with LEARNED prefix creates searchable JSONL entry; recall.sh can find it by keyword.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:58:44.99118-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:03:22.719028-05:00","closed_at":"2026-02-07T20:03:22.719028-05:00","close_reason":"Tests pass, gate clean. Commit: b049852"}
{"id":"oro-rue","title":"Implement: ops agent spawner (short-lived claude -p for review, merge conflict, diagnosis)","description":"Dispatcher component that spawns short-lived claude -p processes for operational tasks. Covers: (1) Two-stage review: spawn reviewer ops agent in worker worktree, reads bd show + git diff, signals APPROVED/REJECTED. (2) Merge conflict resolution: spawn ops agent with both beads' annotations + conflict context. (3) Crash/stuck diagnosis: spawn ops agent to analyze stuck worker state. (4) Model routing: Opus 4.6 for judgment-heavy tasks (merge conflicts, architectural review), latest Sonnet for mechanical tasks (clean reviews, straightforward fixes). Ops agents share the worker pool — no net slot increase. Reference: docs/plans/2026-02-07-manager-redesign.md (Ops Agent Spawner section) and R6 two-stage review.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:25:31.980708-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:24:07.973013-05:00","closed_at":"2026-02-07T22:24:07.973013-05:00","close_reason":"Implemented pkg/ops with Spawner, Review/ResolveMergeConflict/Diagnose methods, Process/SubprocessSpawner interfaces, model routing, cancel/active lifecycle, prompt builders. 17 tests all passing, go vet clean.","dependencies":[{"issue_id":"oro-rue","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:24.403154-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-rue","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.26781-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-seg","title":"Spec: Memory search/retrieval algorithm (FTS5 + RRF + scoring)","description":"Design the search algorithm for oro recall. Prior art reviewed: BCR three-factor scoring (cosine × confidence × decay), CC-v3 hybrid RRF (1/(60+fts_rank) + 1/(60+vec_rank)), CC-v3 dedup at write (0.85 cosine threshold), FTS5 BM25 as day-one standalone. Key files: references/bcr recall.py, yap/reference/Continuous-Claude-v3/opc/scripts/core/recall_learnings.py. Decisions needed: RRF k-constant, decay half-life, dedup threshold, max memories injected into prompt, token budget per injection.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T12:31:21.477008-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:42:18.984075-05:00","closed_at":"2026-02-07T18:42:18.984075-05:00","close_reason":"Spec written to docs/plans/2026-02-07-memory-search-spec.md"}
{"id":"oro-t3u","title":"P0: pre-push hook — quality gate + discovery logging before push","description":"Create a git pre-push hook that enforces: (1) ./quality_gate.sh passes (all 18 checks), (2) if any bead was closed this session, prompt/verify that discoveries were logged to docs/decisions-and-discoveries.md. This prevents agents from pushing code that skips the full quality gate (pre-commit only catches per-file lint, not cross-cutting checks like golangci-lint, go-arch-lint, govulncheck). Also update the dispatching-parallel-agents skill and any agent prompt templates to include quality gate in bead completion steps.","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T18:06:50.451425-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:13:20.803067-05:00","closed_at":"2026-02-07T18:13:20.803067-05:00","close_reason":"Pre-push hook installed in .git/hooks/pre-push, runs full 18-check quality gate. Dispatching skill updated to require agents run quality gate before committing."}
{"id":"oro-ujb","title":"Epic: End-to-end MVP — oro start launches tmux with working manager+dispatcher+workers","description":"Minimum to get oro start actually running: CLI scaffold, daemon launcher, tmux manager, manager prompt, quality gate at worker, memory wiring. Success = user types 'oro start', sees two tmux panes, manager starts chewing through beads, workers execute in worktrees, merges land on main with quality gate.","status":"open","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:20:02.655613-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:20:02.655613-05:00","dependencies":[{"issue_id":"oro-ujb","depends_on_id":"oro-r7b","type":"blocks","created_at":"2026-02-08T01:20:15.911-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb","depends_on_id":"oro-98h","type":"blocks","created_at":"2026-02-08T01:20:15.992587-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb","depends_on_id":"oro-bat","type":"blocks","created_at":"2026-02-08T01:20:16.071743-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-v6f","title":"Protocol: integration test — schema + types against real SQLite","description":"Integration test in pkg/protocol/integration_test.go. Exec schema DDL against in-memory SQLite, INSERT rows using Go structs, SELECT and scan back into structs. Test: go test ./pkg/protocol/... -run TestIntegration -v. Acceptance: all tables created, all row types insert and scan correctly.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:38.336378-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:08:00.651078-05:00","closed_at":"2026-02-07T22:08:00.651078-05:00","close_reason":"Tests pass, gate clean. Commit: 832af31","dependencies":[{"issue_id":"oro-v6f","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.959945-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-6dq","type":"blocks","created_at":"2026-02-07T17:31:02.768351-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-q63","type":"blocks","created_at":"2026-02-07T17:31:02.851427-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-bya","type":"blocks","created_at":"2026-02-07T17:31:02.932647-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-ef8","type":"blocks","created_at":"2026-02-07T17:31:03.014494-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-w2u","title":"Spec: Code search system for Oro sessions (all roles)","description":"Spec out token-efficient code search for Oro. All three roles (Architect, Manager, Worker) get the same hook stack. CC-v3 reference analyzed — three layers: (1) TLDR read enforcer (intercepts Read, returns AST summary instead of raw file, 26-99% token savings), (2) Smart search router (intercepts Grep, classifies structural/literal/semantic, routes to best tool), (3) AST-grep for pattern matching. Plus optional semantic search (FAISS embeddings). Key decision: CC-v3 uses a TypeScript hook + Python TLDR daemon. Oro is Go-based — need to decide: port TLDR to Go, use tree-sitter in Go, or keep polyglot (Go wrapper + external tools). Workers rarely trigger upper layers but get full stack for simplicity. Reference: yap/reference/Continuous-Claude-v3/.claude/hooks/src/tldr-read-enforcer.ts and smart-search-router.ts","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T13:03:25.358562-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:42:33.478325-05:00","closed_at":"2026-02-07T18:42:33.478325-05:00","close_reason":"Spec written to docs/plans/2026-02-07-code-search-spec.md","dependencies":[{"issue_id":"oro-w2u","depends_on_id":"oro-o7r","type":"blocks","created_at":"2026-02-07T13:03:36.51987-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-w6n","title":"Implement: Dispatcher Go binary (UDS server + SQLite WAL + priority queue + worker supervisor)","description":"Was 'Manager daemon'. Manager is now a Claude session. This bead implements the Dispatcher — the Go binary that handles all mechanical coordination: UDS server for workers, SQLite for runtime state, priority queue from bd ready, worker lifecycle supervision, ops agent spawning, merge execution. Receives directives from Manager via SQLite commands table. Sends escalations to Manager via tmux send-keys. See docs/plans/2026-02-07-manager-redesign.md and docs/plans/2026-02-07-oro-lifecycle.md.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:21.257108-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T23:12:21.122046-05:00","closed_at":"2026-02-07T23:12:21.122046-05:00","close_reason":"Dispatcher pkg built: UDS server, SQLite state, worker pool, priority queue, merge+ops integration, 19 tests, lint clean","dependencies":[{"issue_id":"oro-w6n","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.597348-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-o7r","type":"blocks","created_at":"2026-02-07T13:03:36.443153-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:25:46.575303-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-68t","type":"blocks","created_at":"2026-02-07T15:26:11.607622-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-rue","type":"blocks","created_at":"2026-02-07T15:26:16.291574-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.345687-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-yfs","title":"Wire memory extraction into worker (ExtractMarkers + ExtractImplicit on session output)","description":"Worker should capture memories from its subprocess stdout. Two integration points: (1) Pipe subprocess stdout through ExtractMarkers() to capture [MEMORY] lines in real-time. (2) On handoff/completion, run ExtractImplicit() on accumulated session text. Worker needs a memory.Store instance (passed via constructor or from dispatcher). Ref: pkg/worker/worker.go (subprocess management), pkg/memory/memory.go (ExtractMarkers, ExtractImplicit).","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestWorkerExtractsMemories | Cmd: go test -race ./pkg/worker/... | Assert: worker with [MEMORY] lines in subprocess output creates memory rows; implicit patterns extracted on handoff","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:28.29789-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:57:29.760754-05:00","closed_at":"2026-02-08T01:57:29.760754-05:00","close_reason":"Wired memory extraction into worker: SubprocessSpawner returns stdout pipe, processOutput goroutine extracts [MEMORY] markers in real-time, extractImplicitMemories runs on handoff/done. All tests pass, 0 lint issues.","dependencies":[{"issue_id":"oro-yfs","depends_on_id":"oro-adw","type":"blocks","created_at":"2026-02-08T01:05:42.68188-05:00","created_by":"Aakash Shah"}]}
