{"id":"oro-01h","title":"Hook: post-commit discovery reminder","description":"PostToolUse hook for git commit. After feat/fix commits, remind to log to docs/decisions-and-discoveries.md if not already staged. Light reminder, not blocker.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:17:18.453474-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:43:22.426393-05:00","closed_at":"2026-02-07T21:43:22.426393-05:00","close_reason":"PostToolUse reminder hook landed with tests"}
{"id":"oro-06v","title":"Hook: SubagentStop validation (worktree + commit + bead status)","description":"SubagentStop hook that verifies when a Task-tool supervisor finishes: (1) worktree exists, (2) no uncommitted changes, (3) branch pushed to remote, (4) bead status updated. Warns on failures rather than hard-blocking (fail open). Complements existing pre-Task worktree enforcement. Acceptance: dispatched agent that skips push or leaves dirty worktree triggers warning in hook output.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:58:48.972752-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:15:42.821661-05:00","closed_at":"2026-02-07T20:15:42.821661-05:00","close_reason":"Tests pass, gate clean. Commit: d4a5758","comments":[{"id":1,"issue_id":"oro-06v","author":"Aakash Shah","text":"LEARNED: Never chain rebase+merge for multiple agent branches in one command. Do them one at a time: (1) stash dirty state, (2) rebase one branch onto main, (3) ff-only merge, (4) repeat for next branch, (5) stash pop. Also remove worktrees BEFORE attempting rebase — git rebase fails if the branch is checked out in any worktree. The safe sequence is: git worktree remove --force, then git stash, then git rebase main \u003cbranch\u003e, then git merge --ff-only \u003cbranch\u003e, then git branch -d \u003cbranch\u003e.","created_at":"2026-02-08T01:25:48Z"}]}
{"id":"oro-0er","title":"oro stop: full graceful shutdown sequence","description":"oro stop currently only sends SIGTERM. Should: (1) send stop directive via UDS for graceful drain, (2) wait for workers to finish/handoff, (3) kill tmux session, (4) run bd sync. Acceptance: Test: cmd/oro/cmd_stop_test.go:TestStopGraceful | Cmd: go test ./cmd/oro/... -run TestStop | Assert: sends UDS directive, waits for drain, kills tmux, runs bd sync","status":"open","priority":2,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:34:32.683691-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T19:34:32.683691-05:00"}
{"id":"oro-0hz","title":"Worker prompt assembly: 12-section template builder","description":"Build Go code in pkg/worker/ or cmd/oro/ that assembles the 12-section worker prompt from: (1) role, (2) bead details (bd show), (3) memory context, (4) coding rules, (5) TDD instructions, (6) quality gate command, (7) worktree path + branch, (8) git conventions, (9) beads CLI tools, (10) constraints, (11) failure handling, (12) exit condition. Template defined in docs/plans/2026-02-08-oro-architecture-spec.md lines 419-444. The assembled prompt is what oro-worker passes to claude -p. Accept: function takes bead ID + worktree + model + memory context, returns complete prompt string. Unit tested.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:26.979712-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T23:15:36.042523-05:00","closed_at":"2026-02-08T23:15:36.042523-05:00","close_reason":"Implemented 12-section worker prompt assembly with tests"}
{"id":"oro-0i7","title":"Determine fsnotify watch target for beads changes","description":"Decide whether dispatcher should fsnotify watch the entire .beads/ dir, just beads.db (SQLite WAL changes), or issues.jsonl. Consider: what triggers on bd create/close/update, performance at scale, false positives.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T13:04:09.201229-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T13:28:31.512109-05:00","closed_at":"2026-02-08T13:28:31.512109-05:00","close_reason":"Already resolved in spec: watch .beads/ dir, re-run bd ready on change, 60s fallback poll","dependencies":[{"issue_id":"oro-0i7","depends_on_id":"oro-cfp","type":"blocks","created_at":"2026-02-08T13:04:18.332223-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-0q5","title":"Implement: memory system (SQLite tables + extraction pipeline + prompt injection)","description":"Core memory system from the memory spec. Covers: (1) SQLite memories + memories_fts tables (CREATE TABLE + FTS5 virtual table). (2) Worker self-report marker extraction — Go code that monitors claude -p stdout for [MEMORY] lines and INSERTs to memories table. (3) Daemon post-session extraction — regex patterns (I learned, Note:, Gotcha:, Pattern:) applied to session logs. (4) Prompt injection — query memories by tag overlap + BM25 + time decay, inject top 3 into bead prompt (200 token cap). (5) Periodic consolidation — dedup by FTS5 similarity, merge related, prune low-confidence stale entries. Reference: docs/plans/2026-02-07-memory-system-spec.md","notes":"Fixed oro-3w4 test failures. Added: write-time dedup (Jaccard threshold 0.7), ForPrompt aligned with search spec (5 memories/500 tokens), FTS5 OR-join for broader recall, Go-side scoring (bm25 unreliable in modernc), refactored Search/List for lint compliance. All 19 tests pass, 0 lint issues.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:25:28.196703-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:26:39.606744-05:00","closed_at":"2026-02-08T01:26:39.606744-05:00","close_reason":"All 19 tests pass, lint clean, coverage 91.9%. Memory system complete: SQLite tables, FTS5 search, extraction pipeline, ForPrompt injection, Jaccard dedup.","dependencies":[{"issue_id":"oro-0q5","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:20.363224-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-0q5","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.028365-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-0ro","title":"Auto-build oro-search-hook binary on oro start","description":"Ensure oro-search-hook binary is compiled and available when oro starts. Currently requires manual go build. The 3.4MB binary is also tracked in git (should be gitignored). Options: (1) oro start preflight auto-builds if stale, (2) wire into make build, (3) gitignore the binary. Acceptance: Test: cmd/oro/cmd_start_test.go:TestHookBuild | Cmd: go test ./cmd/oro/... -run TestHookBuild | Assert: oro start ensures hook binary exists","status":"open","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:35:35.084003-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T19:35:35.084003-05:00"}
{"id":"oro-1s5","title":"Architectural review: verify all specs cohere before implementation","description":"After oro-seg (memory search) and oro-w2u (code search) specs are complete, verify the full architecture hangs together: IPC comparison, manager redesign, memory system spec, lifecycle doc, code search spec, memory search spec. Check for contradictions, gaps, undefined interfaces between components. Verify the shared protocol package (oro-q63/bya/v6f) will actually serve what the specs need. Output: list of issues found, or green light to proceed with implementation.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T18:20:08.433932-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:48:29.206-05:00","closed_at":"2026-02-07T18:48:29.206-05:00","close_reason":"Arch review written to docs/plans/2026-02-07-arch-review.md","dependencies":[{"issue_id":"oro-1s5","depends_on_id":"oro-seg","type":"blocks","created_at":"2026-02-07T18:20:19.781433-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-1s5","depends_on_id":"oro-w2u","type":"blocks","created_at":"2026-02-07T18:20:19.867243-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-1s7","title":"Design: resolve remaining open questions (merge protocol, reconnection, ralph handoff, context detection, bead prompts, two-stage review)","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:20.136029-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T04:58:44.181593-05:00","closed_at":"2026-02-07T04:58:44.181593-05:00","close_reason":"All 6 design questions resolved: merge protocol, reconnection, ralph handoff, context detection, bead prompt construction, two-stage review"}
{"id":"oro-20s","title":"Beacon injection: interactive claude + send-keys + ORO_ROLE env var","description":"Change cmd/oro/tmux.go to match spec: (1) Both architect and manager launch as interactive 'claude' (not claude -p). (2) After claude starts, inject role-specific beacon via tmux send-keys. (3) Set ORO_ROLE=architect for pane 0 and ORO_ROLE=manager for pane 1 as env vars before launching claude. Current code launches manager as 'claude -p \u003cprompt\u003e' which is wrong per spec — manager should be interactive claude with beacon sent after startup. Update tests in tmux_test.go and start_full_test.go.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:36.734031-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:15:34.743412-05:00","closed_at":"2026-02-09T00:15:34.743412-05:00","close_reason":"Beacon injection + ORO_ROLE env var for both panes","dependencies":[{"issue_id":"oro-20s","depends_on_id":"oro-sk5","type":"blocks","created_at":"2026-02-08T23:06:07.224512-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-20s","depends_on_id":"oro-8g7","type":"blocks","created_at":"2026-02-08T23:06:11.697218-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-2dj","title":"Wire diagnosis agent for stuck workers","description":"ops.Diagnose() exists but dispatcher never calls it. Per spec, when a worker is stuck (same bead fails after 2 context cycles / ralph handoffs), dispatcher should spawn diagnosis agent before escalating to manager. Track handoff count per bead. On 2nd handoff for same bead, spawn diagnosis agent. If diagnosis fails or is inconclusive, then escalate to manager. Acceptance: (1) dispatcher tracks handoff count per bead, (2) 2nd handoff triggers ops.Diagnose(), (3) diagnosis failure escalates to manager.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:21.210368-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T13:09:22.618706-05:00","closed_at":"2026-02-09T13:09:22.618706-05:00","close_reason":"Tests pass, gate clean. Commit: bf5241f","dependencies":[{"issue_id":"oro-2dj","depends_on_id":"oro-vuw","type":"blocks","created_at":"2026-02-09T10:08:46.533955-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-2fa","title":"Fix: /clear hook outputs stale beads state","description":"The /clear hook in .claude/hooks outputs beads ready-work state, but it uses a cached/stale snapshot rather than running bd ready fresh. Investigate which hook script runs on /clear, find why it shows outdated info, and fix it to always show current state.","status":"closed","priority":2,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:03:18.906975-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:31:05.207115-05:00","closed_at":"2026-02-08T03:31:05.207115-05:00","close_reason":"Fixed 3 regexes in session_start_extras.py: [\\w-]+ -\u003e [\\w.-]+ to match dotted bead IDs like oro-ujb.1"}
{"id":"oro-2hb","title":"Dispatcher assigns epics to workers — filter tryAssign to leaf tasks only","description":"bd ready --json returns ALL ready beads including type=epic. tryAssign passes them to workers, but workers can't execute epics. Filter in tryAssign to skip beads where type=epic.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestTryAssignSkipsEpics | Cmd: go test -race -count=1 ./pkg/dispatcher/... -run TestTryAssignSkipsEpics | Assert: epic beads are not assigned to workers, only leaf tasks","status":"closed","priority":0,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T10:24:42.17033-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T10:28:14.372555-05:00","closed_at":"2026-02-10T10:28:14.372555-05:00","close_reason":"Tests pass, gate clean. Commit: 47a5795"}
{"id":"oro-2jb","title":"Implement: shared protocol package (UDS message types + SQLite schema + Go types)","description":"Define the shared Go types and schemas that Dispatcher, Worker, and CLI all depend on. Includes: (1) UDS protocol: line-delimited JSON message types (ASSIGN, DONE, HEARTBEAT, HANDOFF, RECONNECT, SHUTDOWN, STATUS, READY_FOR_REVIEW). (2) SQLite schema: events, assignments, commands, memories, memories_fts tables. (3) Go types for all message structs, SQLite row structs, and directive types (start/stop/pause/focus). This is a thin package — types and schema only, no business logic. Unblocks parallel development of Dispatcher, Worker, and CLI.","status":"closed","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:25:21.120741-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T17:31:36.598167-05:00","closed_at":"2026-02-07T17:31:36.598167-05:00","close_reason":"Decomposed into sub-beads: oro-6dq, oro-q63, oro-bya, oro-ef8, oro-v6f","dependencies":[{"issue_id":"oro-2jb","depends_on_id":"oro-fza","type":"blocks","created_at":"2026-02-07T15:47:24.523959-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-2md","title":"Hook: brainstorming research guard","description":"Evaluate whether brainstorming research enforcement is better as a hook or skill discipline. If hook: verify reference file reads happened before design proposals. May be too hard to enforce mechanically.","status":"closed","priority":4,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:17:18.546952-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:42:59.11048-05:00","closed_at":"2026-02-07T21:42:59.11048-05:00","close_reason":"Decided skill-only (no hook). Hook not viable: proposals are text output not tool calls, 'sufficient research' requires judgment, false positives on Edit/Write overwhelming. Strengthened brainstorming skill with mandatory research gate checklist, sufficiency table, self-check question. Documented decision in decisions-and-discoveries.md."}
{"id":"oro-3w4","title":"Fix memory system test failures (ForPrompt, Consolidate)","description":"3 test failures in pkg/memory: TestForPrompt (FTS5 search returns empty), TestConsolidate_MergesDuplicates (similarity search not matching), TestConsolidate_DryRun (depends on List NULL fix). Root cause: FTS5 query sanitization added but bm25()/POWER() may not work with modernc.org/sqlite. Debug the actual SQL errors.","status":"closed","priority":2,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:03:09.117839-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:56.832803-05:00","closed_at":"2026-02-08T01:05:56.832803-05:00","close_reason":"FTS5 compat with modernc.org/sqlite — OR queries, Go-side scoring, write-time Jaccard dedup"}
{"id":"oro-489","title":"Epic: Graceful shutdown — clean up workers, worktrees, ops agents, and merges on dispatcher exit","description":"When the dispatcher shuts down (context cancel, SIGTERM), several resources are not cleaned up: connected workers aren't gracefully shutdown, worktrees are orphaned, ops agents (claude -p) keep running, and in-flight merges leave stale rebase state. This epic adds a coordinated shutdown sequence: workers → ops agents → merges → worktrees → db.","status":"closed","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:48:29.789513-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T11:01:42.251178-05:00","closed_at":"2026-02-08T11:01:42.251178-05:00","close_reason":"All children complete: 489.1-489.5"}
{"id":"oro-489.1","title":"Broadcast GracefulShutdownWorker to all connected workers on context cancel","description":"In Dispatcher.Run(), when ctx.Done() fires, iterate over all connected workers and call GracefulShutdownWorker() for each before exiting. Add timeout so shutdown doesn't hang if a worker is unresponsive.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestDispatcherShutdownBroadcast | Cmd: go test ./pkg/dispatcher/ -run TestDispatcherShutdownBroadcast -v | Assert: All workers receive PREPARE_SHUTDOWN and connections are closed within timeout","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:49:18.623138-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:56:14.655873-05:00","closed_at":"2026-02-08T03:56:14.655873-05:00","close_reason":"Tests pass, lint clean. Commit: 0814d39","dependencies":[{"issue_id":"oro-489.1","depends_on_id":"oro-489","type":"parent-child","created_at":"2026-02-08T03:49:18.6241-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-489.2","title":"Cancel all active ops agents on dispatcher shutdown","description":"In Dispatcher.Run() shutdown path, call ops.Spawner.Active() to list running agents and Cancel() each one. Add logging for each killed agent.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestDispatcherShutdownOpsCleanup | Cmd: go test ./pkg/dispatcher/ -run TestDispatcherShutdownOpsCleanup -v | Assert: All ops agents are killed before dispatcher exits","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:49:27.22177-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T04:08:20.984609-05:00","closed_at":"2026-02-08T04:08:20.984609-05:00","close_reason":"Implemented in 67b8c72","dependencies":[{"issue_id":"oro-489.2","depends_on_id":"oro-489","type":"parent-child","created_at":"2026-02-08T03:49:27.222548-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-489.2","depends_on_id":"oro-489.1","type":"blocks","created_at":"2026-02-08T03:50:11.513477-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-489.3","title":"Remove active worktrees on dispatcher shutdown","description":"In Dispatcher.Run() shutdown path, after workers and ops agents are stopped, iterate tracked worktrees and call worktreeManager.Remove() for each. Log failures but don't block shutdown.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestDispatcherShutdownWorktreeCleanup | Cmd: go test ./pkg/dispatcher/ -run TestDispatcherShutdownWorktreeCleanup -v | Assert: All worktrees are removed (or removal attempted with logged error)","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:49:38.339507-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T11:01:42.11806-05:00","closed_at":"2026-02-08T11:01:42.11806-05:00","close_reason":"Implemented worktree cleanup in shutdownCleanup() with test","dependencies":[{"issue_id":"oro-489.3","depends_on_id":"oro-489","type":"parent-child","created_at":"2026-02-08T03:49:38.340275-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-489.3","depends_on_id":"oro-489.2","type":"blocks","created_at":"2026-02-08T03:50:18.766123-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-489.4","title":"Abort in-flight rebase/merge operations on dispatcher shutdown","description":"Add a Cancel/Abort method to merge.Coordinator that runs 'git rebase --abort' for any in-progress merges. Call it during dispatcher shutdown after workers are stopped.","acceptance_criteria":"Test: pkg/merge/merge_test.go:TestCoordinatorAbortOnCancel | Cmd: go test ./pkg/merge/ -run TestCoordinatorAbortOnCancel -v | Assert: In-progress rebase is aborted and worktree is left in clean state","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:49:49.195833-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T04:08:20.986843-05:00","closed_at":"2026-02-08T04:08:20.986843-05:00","close_reason":"Implemented in 67b8c72","dependencies":[{"issue_id":"oro-489.4","depends_on_id":"oro-489","type":"parent-child","created_at":"2026-02-08T03:49:49.197168-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-489.4","depends_on_id":"oro-489.1","type":"blocks","created_at":"2026-02-08T03:50:28.43725-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-489.5","title":"Remove worktree on bead assignment failure","description":"In dispatcher assignBead(), if worktree creation succeeds but a later step (sendToWorker, etc.) fails, defer worktreeManager.Remove() to clean up. Prevents orphaned empty worktrees from failed assignments.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestAssignBeadCleansUpOnFailure | Cmd: go test ./pkg/dispatcher/ -run TestAssignBeadCleansUpOnFailure -v | Assert: Worktree is removed when sendToWorker fails after worktree creation","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:50:00.099699-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:56:14.724893-05:00","closed_at":"2026-02-08T03:56:14.724893-05:00","close_reason":"Tests pass, lint clean. Commit: 0814d39","dependencies":[{"issue_id":"oro-489.5","depends_on_id":"oro-489","type":"parent-child","created_at":"2026-02-08T03:50:00.100445-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-52w","title":"Worker extracts memories on every process exit","description":"Worker calls extractImplicitMemories() when subprocess exits regardless of QG outcome. Currently only called in SendDone and SendHandoff. Ensure processOutput completion triggers extraction so learnings from failed attempts are persisted before dispatcher re-assigns.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestProcessExitExtractsMemories | Cmd: go test -race -count=1 ./pkg/worker/... -run TestProcessExitExtractsMemories | Assert: memory store has entries after subprocess exits even when QG fails","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T01:24:28.074047-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T10:54:05.210405-05:00","closed_at":"2026-02-10T10:54:05.210405-05:00","close_reason":"Tests pass, quality gate clean for worker package","dependencies":[{"issue_id":"oro-52w","depends_on_id":"oro-kv1","type":"blocks","created_at":"2026-02-10T01:25:00.486223-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-5t9","title":"Refactor: move internal/runners into pkg/ packages, re-enable deepScan","description":"Move production runner implementations from internal/runners/ into their respective pkg/ packages alongside the interfaces they satisfy. Then re-enable deepScan in .go-arch-lint.yml. Steps: (1) Move ExecCommandRunner into pkg/dispatcher/exec_runner.go, (2) Move ExecGitRunner into pkg/merge/exec_runner.go, (3) Move ClaudeOpsSpawner + opsProcess into pkg/ops/exec_spawner.go, (4) Update imports in cmd/oro/cmd_start.go, (5) Delete internal/runners/, (6) Set deepScan: true in .go-arch-lint.yml and remove the comment, (7) Run go-arch-lint check, go test, golangci-lint. Acceptance: go-arch-lint passes with deepScan=true, all tests pass, internal/runners/ deleted.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:34:05.718171-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:39:27.745653-05:00","closed_at":"2026-02-08T03:39:27.745653-05:00","close_reason":"Tests pass, gate clean. Commit: c844967"}
{"id":"oro-66l","title":"Merge and lint-fix oro-w6n dispatcher package","description":"Dispatcher agent (oro-w6n) built pkg/dispatcher/ in worktree. Needs: rebase onto main, ff-only merge, golangci-lint fixes, full test suite verification.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:03:09.24167-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T23:12:21.19132-05:00","closed_at":"2026-02-07T23:12:21.19132-05:00","close_reason":"Merged dispatcher to main at 164ca9e"}
{"id":"oro-68t","title":"Implement: merge coordinator (sequential rebase-merge with lock, P0 on conflict)","description":"Go package implementing merge coordinator logic, integrated by the Dispatcher binary. Covers: (1) Merge lock acquisition/release. (2) Sequential rebase-merge: git rebase main → git merge --ff-only. (3) Conflict detection: rebase --abort on conflict → delegate to ops agent. (4) Merge context: read both beads' annotations to understand both sides. (5) Escalation: if ops agent resolution fails (tests still fail), escalate to Manager via tmux send-keys. This is a library package used by oro-w6n (Dispatcher), not a standalone binary. Reference: R1 merge protocol in docs/plans/2026-02-07-orchestrator-ipc-comparison.md","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:30.374242-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:23:31.854298-05:00","closed_at":"2026-02-07T22:23:31.854298-05:00","close_reason":"Implemented merge coordinator in pkg/merge/ with Coordinator struct (mutex lock, rebase-merge, conflict detection via ConflictError), GitRunner interface + ExecGitRunner default, and 8 passing tests including concurrency and context cancellation.","dependencies":[{"issue_id":"oro-68t","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.833555-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-6dq","title":"Protocol: UDS message types (Go structs + JSON tags + enum)","description":"Define all UDS message type constants and Go structs in pkg/protocol/message.go. Types: ASSIGN, SHUTDOWN, HEARTBEAT, STATUS, HANDOFF, DONE, READY_FOR_REVIEW, RECONNECT. Each struct gets json tags. Envelope Message struct with Type field for dispatch. Test: go test ./pkg/protocol/... -run TestMessage -v. Acceptance: all message types round-trip through JSON marshal/unmarshal.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:14.132148-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T17:54:09.825348-05:00","closed_at":"2026-02-07T17:54:09.825348-05:00","close_reason":"Completed: message types, payload structs, JSON round-trip tests all passing","dependencies":[{"issue_id":"oro-6dq","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.647811-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-6fw","title":"Update destructive-command-safety skill: allow git worktree remove","description":"The destructive-command-safety skill blocks on git worktree remove because it falls under git state-modifying commands. But worktree removal is routine cleanup in our parallel-agent workflow (using-git-worktrees skill). Add git worktree remove/prune to the Safe list with a note that worktrees are disposable by design — they contain no unique state (all work is committed/pushed before removal).","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T00:26:07.728463-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:28:56.355601-05:00","closed_at":"2026-02-09T00:28:56.355601-05:00","close_reason":"Added git worktree remove/prune and branch -d to pre-approved commands"}
{"id":"oro-773","title":"Implement: Worker Go binary (UDS client + claude -p subprocess + heartbeat + handoff)","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:25.302605-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:26:23.057614-05:00","closed_at":"2026-02-07T22:26:23.057614-05:00","close_reason":"Implemented Worker Go package at pkg/worker/ with UDS client, subprocess spawning via SubprocessSpawner interface, heartbeat/status/done/handoff/reconnect messaging, context file watcher with handoff at \u003e70%, message buffering during disconnection, and reconnection with jitter. All 11 tests pass, go vet clean.","dependencies":[{"issue_id":"oro-773","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.676074-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-773","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:05.651582-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-773","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.107798-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-78l","title":"Dispatcher: implement resume, status, and focus directives","description":"Complete applyDirective() in pkg/dispatcher/dispatcher.go: (1) resume: transition Paused → Running. (2) status: return JSON with state, connected worker count, queue depth (bd ready count), current assignments (worker→bead mapping), merge queue status. Send as ACK detail. (3) focus \u003cepic\u003e: store focused epic ID, filter bd ready results to prioritize beads from that epic. Currently resume is ignored, status is not handled, focus just sets state to running without filtering. All three directive types are already defined in pkg/protocol/directive.go.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:40.351715-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:06:48.694293-05:00","closed_at":"2026-02-09T00:06:48.694293-05:00","close_reason":"Resume/status/focus directives implemented with 5 acceptance tests"}
{"id":"oro-7i6","title":"Focus epic filtering in bead assignment","description":"The focus directive stores focusedEpic in the dispatcher but tryAssign() doesn't use it. When focusedEpic is set, tryAssign should prioritize beads that belong to (or are children of) the focused epic. Beads outside the epic should still be assigned if no focused-epic beads are ready. Acceptance: (1) with focus set, beads from focused epic are assigned before others, (2) non-focused beads still assigned when no focused beads ready, (3) clearing focus (empty string) returns to normal priority order.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:16.774047-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T11:46:35.793576-05:00","closed_at":"2026-02-09T11:46:35.793576-05:00","close_reason":"Tests pass, full gate clean. Commit: 7a6436a"}
{"id":"oro-7ot","title":"Add attempt counting to dispatcher QG retry path","description":"Protocol: Add Attempt int to AssignPayload, QGOutput string to DonePayload. Dispatcher: track attemptCounts map[string]int (like handoffCounts). On QG fail re-assign, increment and pass count. Cap at maxQGRetries (3), then escalate. PromptParams gets Attempt int; AssemblePrompt includes attempt number when \u003e 1.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestHandleDone_QGFailRetryIncrementsAttempt | Cmd: go test -race -count=1 ./pkg/dispatcher/... -run TestHandleDone_QGFailRetry | Assert: attempt count increments on each QG failure re-assign, caps at 3 then escalates","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T01:24:05.900752-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:28:13.35597-05:00","closed_at":"2026-02-10T11:28:13.35597-05:00","close_reason":"Tests pass, quality gate clean. Commit: 39302bd","dependencies":[{"issue_id":"oro-7ot","depends_on_id":"oro-kv1","type":"blocks","created_at":"2026-02-10T01:25:00.283415-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-7ya","title":"Merge and lint-fix oro-0q5 memory package","description":"Memory agent (oro-0q5) built pkg/memory/ in worktree. Needs: fix 3 remaining test failures (oro-3w4), rebase onto main, ff-only merge, golangci-lint fixes.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:03:09.365319-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:56.914657-05:00","closed_at":"2026-02-08T01:05:56.914657-05:00","close_reason":"Memory package merged to main, lint clean, 91.9% coverage, quality gate passing","dependencies":[{"issue_id":"oro-7ya","depends_on_id":"oro-3w4","type":"blocks","created_at":"2026-02-07T23:03:24.244812-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-87o","title":"oro status: show worker count, active beads, and memory stats","description":"oro status currently only shows dispatcher PID status. Enhance it to query the dispatcher (via UDS or SQLite) to show: number of connected workers (idle/busy), active bead assignments, and memory store stats (total memories count). Acceptance: oro status shows worker and bead info when dispatcher is running.","status":"closed","priority":3,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T11:38:12.859955-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:49:22.457951-05:00","closed_at":"2026-02-09T00:49:22.457951-05:00","close_reason":"Enhanced oro status with worker count, active beads, memory stats from dispatcher","dependencies":[{"issue_id":"oro-87o","depends_on_id":"oro-mgf","type":"blocks","created_at":"2026-02-08T11:38:24.62211-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-8g7","title":"Architect beacon: 9-section template in Go","description":"Implement the 9-section architect beacon template in cmd/oro/architect.go (new file). Sections per spec (lines 271-415): (1) role, (2) system map, (3) core skills, (4) output contract, (5) bead craft, (6) strategic decomposition, (7) research, (8) beads CLI, (9) anti-patterns. Accept: ArchitectBeacon() returns the full template string. Unit test verifies all 9 sections present.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:32.459905-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T23:14:42.664242-05:00","closed_at":"2026-02-08T23:14:42.664242-05:00","close_reason":"Implemented full 9-section architect beacon per architecture spec"}
{"id":"oro-8l6","title":"Dispatcher includes fresh memories in QG re-assign","description":"In handleDone QG failure re-assign path, call memory.ForPrompt() and include result in AssignPayload.MemoryContext. Currently only done in assignBead (fresh assignment) and registerWorker (handoff respawn). This ensures retry prompt includes learnings from prior attempts.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestHandleDone_QGFailReassignIncludesMemories | Cmd: go test -race -count=1 ./pkg/dispatcher/... -run TestHandleDone_QGFailReassignIncludesMemories | Assert: re-assign ASSIGN message has non-empty MemoryContext when memories exist","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T01:24:40.120918-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T14:03:33.956803-05:00","closed_at":"2026-02-10T14:03:33.956803-05:00","close_reason":"Tests pass, quality gate clean","dependencies":[{"issue_id":"oro-8l6","depends_on_id":"oro-52w","type":"blocks","created_at":"2026-02-10T01:25:00.185552-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-8l6","depends_on_id":"oro-kv1","type":"blocks","created_at":"2026-02-10T01:25:00.585471-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-8lx","title":"Compact-first context cycling: /compact before ralph handoff, model-specific thresholds","description":"Unified context threshold system. Single source of truth (.oro/thresholds.json) for per-model context thresholds, read by both Go worker and Python hook. Two-stage behavior: first threshold breach triggers /compact, second triggers ralph handoff. One threshold level per model (no warn/critical split). Opus=65%, Sonnet=50%, Haiku=40%, default=50%.","status":"closed","priority":0,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T11:58:04.024406-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T12:46:33.419903-05:00","closed_at":"2026-02-09T12:46:33.419903-05:00","close_reason":"All 5 children closed. Unified thresholds, compact-before-handoff, skill updated."}
{"id":"oro-8lx.1","title":"Create .oro/thresholds.json config and loader","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestLoadThresholds | Cmd: go test ./pkg/worker/... -run TestLoadThresholds -v | Assert: loads per-model thresholds from JSON file, falls back to 50% default when file missing or model unknown","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-09T12:24:53.839759-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T12:35:46.873479-05:00","closed_at":"2026-02-09T12:35:46.873479-05:00","close_reason":"Tests pass, gate clean. Commit: 47595d7","dependencies":[{"issue_id":"oro-8lx.1","depends_on_id":"oro-8lx","type":"parent-child","created_at":"2026-02-09T12:24:53.840999-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-8lx.2","title":"Add stdin pipe to subprocess spawner for /compact","description":"SubprocessSpawner.Spawn() currently returns (Process, io.ReadCloser, error). Need to also return an io.WriteCloser for stdin so the worker can send /compact to the claude subprocess. Update ClaudeSpawner, cmdProcess, Process interface, and all call sites.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestSpawnerReturnsStdin | Cmd: go test ./pkg/worker/... -run TestSpawnerReturnsStdin -v | Assert: Spawn returns stdin writer, writing to it reaches subprocess","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":7,"created_at":"2026-02-09T12:25:07.112639-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T12:39:51.348613-05:00","closed_at":"2026-02-09T12:39:51.348613-05:00","close_reason":"Tests pass, gate clean. Commit: 0cbd480","dependencies":[{"issue_id":"oro-8lx.2","depends_on_id":"oro-8lx","type":"parent-child","created_at":"2026-02-09T12:25:07.113517-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-8lx.3","title":"Two-stage watchContext: compact first, handoff second","description":"Modify watchContext() to use thresholds from .oro/thresholds.json. On first breach: write /compact to subprocess stdin, write .oro/compacted flag file. On second breach (flag exists): SendHandoff + killProc as before. Flag cleared on new bead assignment.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestWatchContext_CompactThenHandoff | Cmd: go test ./pkg/worker/... -run TestWatchContext_CompactThenHandoff -v | Assert: first threshold hit sends /compact and creates flag, second threshold hit triggers handoff+kill","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":7,"created_at":"2026-02-09T12:25:20.399978-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T12:44:53.825168-05:00","closed_at":"2026-02-09T12:44:53.825168-05:00","close_reason":"Tests pass, race-free, gate clean. Commit: 1e598c5","dependencies":[{"issue_id":"oro-8lx.3","depends_on_id":"oro-8lx","type":"parent-child","created_at":"2026-02-09T12:25:20.400882-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-8lx.3","depends_on_id":"oro-8lx.1","type":"blocks","created_at":"2026-02-09T12:25:59.339639-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-8lx.3","depends_on_id":"oro-8lx.2","type":"blocks","created_at":"2026-02-09T12:25:59.418884-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-8lx.4","title":"Update Python hook to read thresholds from .oro/thresholds.json","description":"Replace hardcoded THRESHOLDS dict in inject_context_usage.py with a loader that reads .oro/thresholds.json. Single threshold per model (no warn/critical split). When threshold breached and .oro/compacted missing: inject compact message. When breached and .oro/compacted exists: inject handoff message. Falls back to 50% default.","acceptance_criteria":"Test: .claude/hooks/test_inject_context_usage.py:test_reads_thresholds_json | Cmd: python3 -m pytest .claude/hooks/test_inject_context_usage.py -v | Assert: hook reads thresholds from JSON, uses single level, respects compacted flag","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-09T12:25:34.924797-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T12:43:10.205026-05:00","closed_at":"2026-02-09T12:43:10.205026-05:00","close_reason":"Tests pass (11/11), ruff clean. Commit: ba4b1b5","dependencies":[{"issue_id":"oro-8lx.4","depends_on_id":"oro-8lx","type":"parent-child","created_at":"2026-02-09T12:25:34.925599-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-8lx.4","depends_on_id":"oro-8lx.1","type":"blocks","created_at":"2026-02-09T12:25:59.49625-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-8lx.5","title":"Update context-checkpoint skill to match unified thresholds","description":"Rewrite context-checkpoint/SKILL.md to remove the warn/critical table. Replace with single threshold per model (Opus=65%, Sonnet=50%, Haiku=40%) and two-stage behavior description (compact first, handoff second). Reference .oro/thresholds.json as source of truth.","acceptance_criteria":"Cmd: grep -c 'warn\\|critical' .claude/skills/context-checkpoint/SKILL.md | Assert: returns 0 — no warn/critical language remains","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":3,"created_at":"2026-02-09T12:25:47.69807-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T12:46:33.338501-05:00","closed_at":"2026-02-09T12:46:33.338501-05:00","close_reason":"Acceptance met: 0 warn/critical references. Commit: ba38ee6","dependencies":[{"issue_id":"oro-8lx.5","depends_on_id":"oro-8lx","type":"parent-child","created_at":"2026-02-09T12:25:47.698826-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-8lx.5","depends_on_id":"oro-8lx.4","type":"blocks","created_at":"2026-02-09T12:25:59.574817-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98h","title":"Enforce quality gate at worker level before MsgDone (block merge on failure)","description":"Workers must run quality_gate.sh and pass before sending MsgDone. (1) Add QualityGatePassed bool to DonePayload. (2) Worker bead prompt template must include 'run ./quality_gate.sh before completing'. (3) Dispatcher rejects merge if QualityGatePassed=false — logs warning, reassigns bead. (4) Ops review agent only triggered AFTER gate passes. This pushes all build/test/lint work to workers and keeps the manager/dispatcher path clean. Ref: quality_gate.sh (18 checks), pkg/protocol/message.go (DonePayload), pkg/dispatcher/dispatcher.go (merge trigger), pkg/worker/worker.go (done flow).","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:08:46.569375-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:31:09.671181-05:00","closed_at":"2026-02-08T01:31:09.671181-05:00","close_reason":"Implemented quality gate enforcement at worker level: added QualityGatePassed bool to DonePayload, worker prompt includes quality_gate.sh instruction, dispatcher rejects merge and reassigns bead when gate fails, RunQualityGate() helper added. All tests pass with race detector, linter clean."}
{"id":"oro-98q","title":"Epic: Code search hook (day-one MVP — TLDR read enforcer for Go files)","description":"Day-one code search: Go binary hook that intercepts PreToolUse Read calls, applies bypass rules, and returns go/ast structure summaries instead of raw file content. Target: 90%+ token savings on Go files \u003e100 lines. Spec: docs/plans/2026-02-07-code-search-spec.md","acceptance_criteria":"All child beads closed. golangci-lint clean. go test -race ./... passes. Hook binary compiles and is registered in settings.json.","status":"closed","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:24.552714-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:19:36.822194-05:00","closed_at":"2026-02-08T02:19:36.822194-05:00","close_reason":"All child beads landed: bypass rules, AST summarizer, hook binary, wiring+integration tests"}
{"id":"oro-98q.1","title":"Implement bypass rules for Read hook (small files, config, tests, offset/limit)","description":"Create pkg/codesearch/bypass.go with ShouldBypass(toolInput) bool. Bypass conditions from spec: files \u003c3KB (~100 lines), non-code files (JSON, YAML, MD, toml), test files (*_test.go), explicit offset/limit in Read call, files in .claude/ directory. Pure function, no side effects.","acceptance_criteria":"Test: pkg/codesearch/bypass_test.go:TestShouldBypass | Cmd: go test -race ./pkg/codesearch/... -run TestShouldBypass -v | Assert: bypasses small files, config files, test files, offset/limit reads, .claude/ paths; intercepts large Go source files","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:37.467377-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:42:59.912465-05:00","closed_at":"2026-02-08T01:42:59.912465-05:00","close_reason":"ShouldBypass pure function with 19 test cases. Bypasses small files \u003c3KB, configs, tests, offset/limit, .claude/ paths.","dependencies":[{"issue_id":"oro-98q.1","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:37.468401-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98q.2","title":"Implement Go AST summarizer (structure mode via go/ast)","description":"Create pkg/codesearch/summarize.go with Summarize(filePath string) (string, error). Uses go/ast to parse Go files and extract: package name, imports, function signatures (with params + return types + line numbers), type declarations (structs with fields, interfaces with methods), const/var blocks. Output is compact text format with line numbers. Target: 90%+ token reduction vs raw file. No external dependencies — go/ast stdlib only.","acceptance_criteria":"Test: pkg/codesearch/summarize_test.go:TestSummarize | Cmd: go test -race ./pkg/codesearch/... -run TestSummarize -v | Assert: summarizes a 200+ line Go file to \u003c10% of original token count; includes all exported function signatures, type declarations, and line numbers; returns error for non-Go files","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:41.678078-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:43:00.009034-05:00","closed_at":"2026-02-08T01:43:00.009034-05:00","close_reason":"Summarize via go/ast: function sigs, types, consts/vars with line numbers. 90%+ token reduction. All tests pass, lint clean.","dependencies":[{"issue_id":"oro-98q.2","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:41.678811-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98q.3","title":"Implement hook binary entry point (oro-search-hook main.go)","description":"Create cmd/oro-search-hook/main.go. Reads PreToolUse JSON from stdin, checks tool_name=='Read', calls ShouldBypass — if bypass returns allow ({}). Otherwise calls Summarize on the file_path, returns JSON with permissionDecision:'deny' and permissionDecisionReason containing the summary. For non-Read tools or Grep (day-two), returns allow. Handles errors gracefully (if summarize fails, allow the read through rather than blocking).","acceptance_criteria":"Test: cmd/oro-search-hook/main_test.go:TestHookDispatch | Cmd: go test -race ./cmd/oro-search-hook/... -v | Assert: returns deny+summary for large Go file Read; returns allow for small file Read; returns allow for non-Read tools; returns allow on summarize error","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:53.269098-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:53:28.535985-05:00","closed_at":"2026-02-08T01:53:28.535985-05:00","close_reason":"Implemented oro-search-hook binary: HandleHook dispatches PreToolUse JSON, denies with AST summary for large Go Read calls, allows bypass cases and non-Read tools, fail-open on errors. 11 table-driven tests pass with -race, 0 linter issues.","dependencies":[{"issue_id":"oro-98q.3","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:53.269932-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-98q.3","depends_on_id":"oro-98q.1","type":"blocks","created_at":"2026-02-08T00:45:02.23575-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-98q.3","depends_on_id":"oro-98q.2","type":"blocks","created_at":"2026-02-08T00:45:02.318566-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-98q.4","title":"Wire hook: build target + settings.json registration + integration test","description":"Add Makefile target to compile oro-search-hook and place binary in .claude/hooks/. Register hook in .claude/settings.json for PreToolUse events with 5s timeout. Write integration test that compiles the binary, feeds it realistic PreToolUse JSON via stdin pipe, and asserts correct output. Verify the compiled binary works end-to-end with a real Go source file.","acceptance_criteria":"Test: cmd/oro-search-hook/integration_test.go:TestHookEndToEnd | Cmd: make build-search-hook \u0026\u0026 go test -race ./cmd/oro-search-hook/... -run TestHookEndToEnd -v | Assert: compiled binary produces deny+summary for large Go file, allow for small file; settings.json has correct hook registration","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:44:55.053949-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:16:02.694854-05:00","closed_at":"2026-02-08T02:16:02.694854-05:00","close_reason":"Closed","dependencies":[{"issue_id":"oro-98q.4","depends_on_id":"oro-98q","type":"parent-child","created_at":"2026-02-08T00:44:55.054722-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-98q.4","depends_on_id":"oro-98q.3","type":"blocks","created_at":"2026-02-08T00:45:02.407922-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-9fu","title":"Design manager initial message (beacon) content","description":"Define what the role-specific beacon sent via tmux send-keys should contain for the manager session. Includes: responsibilities, available oro CLI commands, behavioral guidelines, how to interact with dispatcher.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T13:03:58.183117-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T13:32:34.764477-05:00","closed_at":"2026-02-08T13:32:34.764477-05:00","close_reason":"Manager beacon template designed: 12 sections covering role, system map, startup, CLI, decomposition, scale policy, escalations, dispatcher msg format, anti-patterns, shutdown","dependencies":[{"issue_id":"oro-9fu","depends_on_id":"oro-cfp","type":"blocks","created_at":"2026-02-08T13:04:18.151745-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-9qf","title":"oro worker subcommand: binary wrapping pkg/worker library","description":"Create cmd/oro/cmd_worker.go — the oro worker subcommand that wraps the existing pkg/worker/ library into a runnable binary. Accepts flags: --socket (path to dispatcher UDS socket, required), --id (worker ID like w-01, required). On start: creates a worker.Worker instance, connects to the dispatcher socket, runs the worker loop (heartbeat, receive ASSIGN, spawn claude -p via worker.ClaudeSpawner, send DONE/HANDOFF, handle PREPARE_SHUTDOWN). Register as a cobra subcommand in root.go. Acceptance: (1) 'oro worker --socket=/tmp/test.sock --id=w-01' starts and attempts UDS connection. (2) Unit test verifies flag parsing and worker creation. (3) go build ./cmd/oro succeeds.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:26:07.497707-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T23:30:17.542487-05:00","closed_at":"2026-02-08T23:30:17.542487-05:00","close_reason":"Worker subcommand implemented with 5 tests. Commit 82bed8d."}
{"id":"oro-a9r","title":"Hook: improve session-start — stale work, merged PR cleanup, recent learnings","description":"Enhance existing session-start hook (bd prime) to: (1) detect merged PRs with uncleaned worktrees and suggest cleanup commands, (2) surface stale beads (no activity \u003e3 days), (3) show 5 most recent LEARNED entries from knowledge.jsonl if it exists. Acceptance: session start shows actionable cleanup suggestions and recent learnings alongside existing bd ready output.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:58:49.928684-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:18:07.939269-05:00","closed_at":"2026-02-07T20:18:07.939269-05:00","close_reason":"Tests pass, gate clean. Commit: c92f5f6","dependencies":[{"issue_id":"oro-a9r","depends_on_id":"oro-rez","type":"blocks","created_at":"2026-02-07T19:58:58.043279-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-aa0","title":"Spec: AST-based code search for workers (TLDR stack pattern)","description":"Workers need token-efficient code search. CC-v3 TLDR stack: 5-layer analysis (AST, Call Graph, CFG, DFG, PDG) = 95% token savings (~1,200 vs 23,000 tokens). tldr-read-enforcer hook intercepts Read tool, returns L1+L2+L3 instead of raw files. Prior art in yap/reference/Continuous-Claude-v3/.claude/ (hooks, servers/ast-grep/). Need to decide: adopt TLDR approach, use ast-grep MCP, or simpler tree-sitter integration in Go. This is about worker efficiency — keeping context small so ralph cycles are less frequent.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T12:31:17.28325-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T13:03:59.840462-05:00","closed_at":"2026-02-07T13:03:59.840462-05:00","close_reason":"Superseded by oro-w2u (broader scope) and oro-o7r (Manager role change)","dependencies":[{"issue_id":"oro-aa0","depends_on_id":"oro-w6n","type":"blocks","created_at":"2026-02-07T12:31:37.658993-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-adw","title":"Extend HandoffPayload with typed context (learnings, decisions, files)","description":"Extend protocol.HandoffPayload to include Learnings []string, Decisions []string, FilesModified []string, ContextSummary string. Worker populates these before sending MsgHandoff. Dispatcher persists to memories table via memory.Store.Insert(). On next MsgAssign for same bead, dispatcher calls memory.ForPrompt() and includes result in AssignPayload (new field: MemoryContext string). Ref: pkg/protocol/message.go, pkg/worker/worker.go (handleMessage + handoff logic around line 250), pkg/dispatcher/dispatcher.go (assign logic), pkg/memory/memory.go (ForPrompt, Insert).","acceptance_criteria":"Test: pkg/protocol/message_test.go:TestHandoffPayloadFields + pkg/worker/worker_test.go:TestHandoffPopulatesContext | Cmd: go test -race ./pkg/protocol/... ./pkg/worker/... ./pkg/dispatcher/... | Assert: HandoffPayload marshals with new fields; worker fills context before sending; dispatcher persists learnings as memories; reassign includes ForPrompt output","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:17.495249-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:33:37.67279-05:00","closed_at":"2026-02-08T01:33:37.67279-05:00","close_reason":"Extended HandoffPayload with Learnings, Decisions, FilesModified, ContextSummary fields. Worker reads .oro/ context files before handoff. Dispatcher persists learnings/decisions as memories via memory.Store.Insert(). AssignPayload gains MemoryContext field populated by memory.ForPrompt(). All tests pass with -race, zero lint issues."}
{"id":"oro-b9m","title":"Update dispatching-parallel-agents skill from swarm spec (worktrees + agent commits)","description":"Update .claude/skills/dispatching-parallel-agents/SKILL.md to implement the Claude agents tier from docs/plans/2026-02-07-agent-swarm-spec.md. Key changes: (1) worktree per agent by default, (2) agents always commit on their branch, (3) manager merges ff-only, (4) agent prompt template with worktree path + commit instructions, (5) cleanup step. Remove the 'don't commit' constraint. Reference the swarm spec for rationale.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:12:46.463057-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T19:14:13.533725-05:00","closed_at":"2026-02-07T19:14:13.533725-05:00","close_reason":"Skill rewritten with worktree isolation, agent commits, manager ff-only merge"}
{"id":"oro-bat","title":"Wire memory injection into dispatcher assign (ForPrompt in AssignPayload)","description":"When dispatcher assigns a bead to a worker, call memory.ForPrompt() with the bead's tags and description, include the result in AssignPayload.MemoryContext. Worker injects this into the claude -p prompt. Requires: AssignPayload gets MemoryContext string field. Dispatcher needs memory.Store instance. Ref: pkg/dispatcher/dispatcher.go (assign logic), pkg/protocol/message.go (AssignPayload), pkg/memory/memory.go (ForPrompt).","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestAssignIncludesMemories | Cmd: go test -race ./pkg/dispatcher/... | Assert: assign payload for bead with related memories includes non-empty MemoryContext","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:30.986703-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:16:02.696828-05:00","closed_at":"2026-02-08T02:16:02.696828-05:00","close_reason":"Closed","dependencies":[{"issue_id":"oro-bat","depends_on_id":"oro-yfs","type":"blocks","created_at":"2026-02-08T01:05:42.762206-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-bk6","title":"Epic: Dogfooding readiness — make oro build itself","description":"6 blockers prevent oro from building itself. Fix process manager self-spawn, manager beacon CLI, auto-start directive, rich worker prompts, bead closing after merge, and memory store wiring.","acceptance_criteria":"All child beads closed. oro start launches dispatcher, spawns workers, workers get full prompts, complete beads, close them, and capture memories.","status":"closed","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T20:09:05.747832-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T00:39:20.589092-05:00","closed_at":"2026-02-10T00:39:20.589092-05:00","close_reason":"All 6 child beads completed. Oro can now build itself."}
{"id":"oro-bk6.1","title":"Process manager: use os.Args[0] instead of hardcoded 'oro'","description":"NewOroProcessManager hardcodes 'oro' as the binary name for worker spawning. Since oro isn't installed on PATH, every Spawn() call fails. Fix: use os.Args[0] like ExecDaemonSpawner already does. File: pkg/dispatcher/process_manager.go","acceptance_criteria":"Test: pkg/dispatcher/process_manager_test.go:TestSpawnUsesCurrentBinary | Cmd: go test ./pkg/dispatcher/... -run TestSpawnUsesCurrentBinary | Assert: spawned command uses os.Args[0] path, not hardcoded 'oro'","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-09T20:09:21.538366-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T21:31:49.110904-05:00","closed_at":"2026-02-09T21:31:49.110904-05:00","close_reason":"Tests pass, all dispatcher tests green. Commit: 077e7e8","dependencies":[{"issue_id":"oro-bk6.1","depends_on_id":"oro-bk6","type":"parent-child","created_at":"2026-02-09T20:09:21.539203-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-bk6.2","title":"Fix manager beacon CLI commands (oro scale → oro directive scale)","description":"Manager beacon instructs Claude to run 'oro scale N', 'oro pause', 'oro resume', 'oro focus' — none exist as subcommands. Should be 'oro directive scale N', etc. File: cmd/oro/manager.go","acceptance_criteria":"Test: cmd/oro/manager_test.go:TestManagerBeaconCLI | Cmd: go test ./cmd/oro/... -run TestManagerBeaconCLI | Assert: beacon text contains 'oro directive scale' not 'oro scale'","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-09T20:09:25.844357-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T21:34:49.345185-05:00","closed_at":"2026-02-09T21:34:49.345185-05:00","close_reason":"Tests pass, all beacon CLI commands now use 'oro directive' prefix. Commit: 98b6101","dependencies":[{"issue_id":"oro-bk6.2","depends_on_id":"oro-bk6","type":"parent-child","created_at":"2026-02-09T20:09:25.845167-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-bk6.3","title":"Auto-send start directive after daemon socket is ready","description":"oro start launches the daemon but never sends a start directive. Dispatcher stays in StateInert forever — no workers spawned, no beads assigned. Fix: after waitForSocket() succeeds in runFullStart(), send a start directive via UDS. File: cmd/oro/cmd_start.go","acceptance_criteria":"Test: cmd/oro/cmd_start_test.go:TestStartSendsDirective | Cmd: go test ./cmd/oro/... -run TestStartSendsDirective | Assert: after socket is ready, start directive is sent, dispatcher transitions to StateRunning","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-09T20:09:30.273385-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T21:49:54.118479-05:00","closed_at":"2026-02-09T21:49:54.118479-05:00","close_reason":"Tests pass, start directive auto-sent after socket ready. Commit: 01a1368","dependencies":[{"issue_id":"oro-bk6.3","depends_on_id":"oro-bk6","type":"parent-child","created_at":"2026-02-09T20:09:30.274236-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-bk6.3","depends_on_id":"oro-bk6.1","type":"blocks","created_at":"2026-02-09T20:09:55.376597-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-bk6.4","title":"Wire AssemblePrompt with bead details from beads.Show()","description":"Workers get a 1-line prompt ('Execute bead X in worktree Y') because BuildPrompt is used instead of the 12-section AssemblePrompt. Fix: dispatcher calls beads.Show(beadID) to get BeadDetail, passes title/description/acceptance in AssignPayload, worker calls AssemblePrompt. Files: pkg/dispatcher/dispatcher.go, pkg/worker/worker.go, pkg/worker/prompt.go","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestAssignUsesRichPrompt | Cmd: go test ./pkg/dispatcher/... -run TestAssignUsesRichPrompt | Assert: AssignPayload includes bead title, description, acceptance criteria; worker calls AssemblePrompt not BuildPrompt","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":7,"created_at":"2026-02-09T20:09:34.605562-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T00:39:20.522533-05:00","closed_at":"2026-02-10T00:39:20.522533-05:00","close_reason":"Tests pass, dispatcher sends bead details, worker uses AssemblePrompt. Commit: 6006358","dependencies":[{"issue_id":"oro-bk6.4","depends_on_id":"oro-bk6","type":"parent-child","created_at":"2026-02-09T20:09:34.60636-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-bk6.4","depends_on_id":"oro-bk6.1","type":"blocks","created_at":"2026-02-09T20:09:55.47442-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-bk6.5","title":"Call beads.Close() after successful merge","description":"After a successful merge, the dispatcher never calls beads.Close(). Completed beads stay open and get re-assigned in the next poll cycle, causing infinite duplicate work. Fix: call d.beads.Close(beadID) in handleDone() after successful merge. File: pkg/dispatcher/dispatcher.go","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestMergeClosesBead | Cmd: go test ./pkg/dispatcher/... -run TestMergeClosesBead | Assert: after successful merge, beads.Close(beadID) is called; bead does not reappear in bd ready","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-09T20:09:38.979614-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T21:38:46.729446-05:00","closed_at":"2026-02-09T21:38:46.729446-05:00","close_reason":"Tests pass, beads.Close() called after merge. Commit: 3690db3","dependencies":[{"issue_id":"oro-bk6.5","depends_on_id":"oro-bk6","type":"parent-child","created_at":"2026-02-09T20:09:38.980857-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-by8","title":"Bootstrap ~/.oro directory on first run","description":"oro start creates state.db via buildDispatcher (which MkdirAll's the DB parent dir), but doesn't explicitly bootstrap ~/.oro/. Ensure oro start creates ~/.oro/ with correct permissions (0750) if it doesn't exist, and documents what lives there (oro.pid, oro.sock, state.db). Acceptance: fresh user can run oro start without manually creating ~/.oro/.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T11:38:03.946156-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T19:26:22.537103-05:00","closed_at":"2026-02-08T19:26:22.537103-05:00","close_reason":"Tests pass, gate clean. Commit: 53cd5c7"}
{"id":"oro-bya","title":"Protocol: SQLite row types (Go structs for each table)","description":"Define Go structs matching each SQLite table in pkg/protocol/tables.go. Structs: Event, Assignment, Command, Memory. Fields match schema columns with appropriate Go types. Test: go test ./pkg/protocol/... -run TestTable -v. Acceptance: struct fields match schema columns, JSON tags on Memory.Tags.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:30.037123-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:55:43.834342-05:00","closed_at":"2026-02-07T21:55:43.834342-05:00","close_reason":"4 row types with 8 tests, all matching schema DDL columns","dependencies":[{"issue_id":"oro-bya","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.803784-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-bya","depends_on_id":"oro-q63","type":"blocks","created_at":"2026-02-07T17:31:02.681533-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-cag","title":"Install oro globally (like gastown)","description":"Future: add a proper install mechanism for the oro binary (go install, Makefile target, or Homebrew formula) so it's on PATH system-wide. Reference gastown's global install pattern. Not blocking — process manager now uses os.Args[0] for self-spawning.","acceptance_criteria":"Cmd: which oro | Assert: returns a path; oro --version prints version","status":"open","priority":4,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T20:09:43.377575-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T20:09:43.377575-05:00","dependencies":[{"issue_id":"oro-cag","depends_on_id":"oro-bk6.1","type":"blocks","created_at":"2026-02-09T20:09:55.574928-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-cfh","title":"Fix worker silent connect: send initial heartbeat on Run()","description":"Worker connects to dispatcher UDS but never sends any message. Dispatcher handleConn blocks on scanner.Scan() waiting for worker to identify itself. registerWorker is never called, so tryAssign sees 0 idle workers. Fix: worker.Run() should send an initial HEARTBEAT immediately after starting the read loop.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestWorkerSendsInitialHeartbeat | Cmd: go test -race -count=1 ./pkg/worker/... -run TestWorkerSendsInitialHeartbeat | Assert: first message on connection is HEARTBEAT with worker ID","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T01:05:35.61679-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T01:30:04.996496-05:00","closed_at":"2026-02-10T01:30:04.996496-05:00","close_reason":"Worker now sends HEARTBEAT on Run() startup so dispatcher registers it. Tests pass, gate clean. Commit: 1edb1bc","comments":[{"id":5,"issue_id":"oro-cfh","author":"Aakash Shah","text":"LEARNED: Worker must send initial HEARTBEAT on Run() startup so dispatcher can register it via extractWorkerID/registerWorker. Without this, handleConn blocks on scanner.Scan() waiting for worker to identify itself — classic chicken-and-egg deadlock.","created_at":"2026-02-10T15:21:16Z"}]}
{"id":"oro-cfp","title":"Finalize oro architecture spec — resolve open questions with human","description":"The draft spec at docs/plans/2026-02-08-oro-architecture-spec.md has open questions that need human input: (1) Manager prompt content — what should it actually say? (2) Is manager claude -p or interactive claude with initial message? (3) How does scale N work — who spawns worker processes? (4) fsnotify target — .beads/issues.jsonl or individual files? (5) Remove SQLite commands table or keep as audit log? (6) Worker prompt template sections. Continue the design conversation from where this session left off.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T12:19:49.841341-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T13:32:59.870193-05:00","closed_at":"2026-02-08T13:32:59.870193-05:00","close_reason":"All open questions resolved: UDS protocol, worker lifecycle, role isolation, manager launch, fsnotify, SQLite audit log, worker spawning, same-directory safety, role-aware hooks, worker prompt template (12 sections), manager beacon template (12 sections), dispatcher escalation format ([ORO-DISPATCH] prefix)"}
{"id":"oro-cwz","title":"Epic: Smart code search — multi-language support and intelligent routing","description":"Extend oro-search-hook beyond Go-only to support Python, TypeScript, Rust, Java. Add intelligent Grep routing (structural/literal/semantic classification). Build semantic search with embeddings for large codebases. Add cross-hook context passing and daemon caching as needed. This is critical because oro is a general-purpose orchestrator — workers operate on any language codebase.","status":"open","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:28:30.208937-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:28:30.208937-05:00"}
{"id":"oro-cwz.1","title":"Multi-language file summarization via ast-grep CLI","description":"Extend the Read hook to summarize Python, TypeScript/JavaScript, Rust, and Java files using ast-grep CLI. Phase 1: shell out to ast-grep for multi-language AST parsing. Introduce Summarizer interface, dispatch by extension, language registry. Output format must match Go summary style (L\u003cline\u003e: kind name signature). Fail-open if ast-grep not installed. Tigers: (1) ast-grep not installed breaks zero-dep promise — must degrade gracefully, (2) subprocess latency for N patterns per file — use single YAML rule file for one-pass extraction, (3) output format inconsistency across languages — each lang needs formatting logic, (4) maintenance burden of N language configs (~300 lines per language). Acceptance: Python and TypeScript files \u003e3KB produce structural summaries with 70%+ token savings.","status":"closed","priority":1,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:28:46.062282-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:46:34.024394-05:00","closed_at":"2026-02-10T11:46:34.024394-05:00","close_reason":"Tests pass, quality gate clean. Python 77.7% savings, TypeScript 85.4% savings, both \u003e70% threshold. Commit: ba5a4cc","dependencies":[{"issue_id":"oro-cwz.1","depends_on_id":"oro-cwz","type":"parent-child","created_at":"2026-02-09T18:28:46.063352-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-cwz.2","title":"Search router for Grep interception (structural/literal/semantic classification)","description":"Intercept Grep tool calls in the hook. Classify patterns as structural (func.*error, type Server struct), literal (TODO, handleRequest), or semantic (where is auth logic?). Route structural queries to AST-based search, pass literal through to ripgrep, flag semantic for future embeddings. Components: QueryClassifier (pure function, regex heuristics), StructuralSearch (go/ast + ast-grep for multi-lang), GrepBypass rules. Must be conservative — classify as Literal when in doubt. Tigers: (1) structural search on large dirs blows 5s timeout — need 3s cap + file count limit, (2) deny response for Grep may confuse Claude vs ripgrep output, (3) classification accuracy on borderline patterns. Elephant: structural grep queries may be \u003c5% of all greps. Acceptance: Grep calls with structural patterns return AST-based results; literal patterns pass through unmodified.","status":"open","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:28:51.956369-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:28:51.956369-05:00","dependencies":[{"issue_id":"oro-cwz.2","depends_on_id":"oro-cwz","type":"parent-child","created_at":"2026-02-09T18:28:51.957109-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-cwz.2","depends_on_id":"oro-cwz.1","type":"blocks","created_at":"2026-02-09T18:29:20.592216-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-cwz.3","title":"Semantic code search with embeddings","description":"Enable natural-language code search by embedding code chunks (functions, types, file summaries) into vectors. Components: (1) Code chunker — extract indexable chunks from source files via AST, (2) Embedding engine — Ollama nomic-embed-text for local embeddings with Embedder interface for swappability, (3) Code index — SQLite brute-force cosine similarity (sufficient at \u003c10K chunks), (4) CLI indexer (oro index build) + fsnotify incremental updates, (5) Hook integration — classify Grep as semantic, embed query, return ranked results. Tigers: (1) Ollama dependency — not standard, must fail-open, (2) cold model load 5-30s blows hook timeout — need pre-warming, (3) embedding quality with general-purpose models, (4) index staleness. Store in .oro/code_index.db. Acceptance: 'oro index build' indexes a codebase; semantic Grep queries return relevant code locations.","status":"open","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:28:58.213399-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:28:58.213399-05:00","dependencies":[{"issue_id":"oro-cwz.3","depends_on_id":"oro-cwz","type":"parent-child","created_at":"2026-02-09T18:28:58.21407-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-cwz.3","depends_on_id":"oro-cwz.1","type":"blocks","created_at":"2026-02-09T18:29:20.688112-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-cwz.3","depends_on_id":"oro-cwz.2","type":"blocks","created_at":"2026-02-09T18:29:20.784882-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-cwz.4","title":"Cross-hook context passing (search informs read summarization)","description":"Allow hooks to share state between invocations so recent Grep patterns inform subsequent Read summaries. Grep hook writes QueryEntry to /tmp/oro-search-context/\u003csession_id\u003e.json (60s TTL, max 10 entries). Read hook reads context and calls SummarizeFocused() which reorders AST output to emphasize matching declarations. Alternative explored: transcript_path already contains all prior tool calls — could read last N tool calls instead of separate IPC. Tigers: (1) focused summaries may not help Claude vs full summaries — no evidence, (2) stale context misleads, (3) file locking races. Elephant: over-engineering — full summary already achieves 90%+ savings. Acceptance: Grep for 'auth' then Read auth.go produces summary emphasizing auth-related functions.","status":"open","priority":4,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:29:03.873132-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:33:25.061905-05:00","dependencies":[{"issue_id":"oro-cwz.4","depends_on_id":"oro-cwz","type":"parent-child","created_at":"2026-02-09T18:29:03.873957-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-cwz.4","depends_on_id":"oro-cwz.2","type":"blocks","created_at":"2026-02-09T18:29:20.8828-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-cwz.5","title":"Daemon mode for AST caching","description":"Persistent daemon process that pre-parses and caches AST summaries, serves them via unix socket to the hook. Components: in-memory cache (map + RWMutex), fsnotify file watcher for invalidation, IPC via unix socket, hook becomes thin client with fallback to direct parse. Premortem conclusion: PREMATURE OPTIMIZATION for Go-only (6ms parse time, 18 files above threshold). Revisit when: (1) multi-language parsing via ast-grep/tree-sitter makes parse times 10-100x slower, (2) project scale reaches hundreds of large files, (3) semantic search index needs persistent daemon infrastructure. Do not build until non-Go language support and semantic search are done and measured. Acceptance: hook serves cached summaries in \u003c1ms; cache invalidates on file change.","status":"open","priority":4,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:29:08.657183-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:33:25.146466-05:00","dependencies":[{"issue_id":"oro-cwz.5","depends_on_id":"oro-cwz","type":"parent-child","created_at":"2026-02-09T18:29:08.657893-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-cwz.5","depends_on_id":"oro-cwz.1","type":"blocks","created_at":"2026-02-09T18:29:20.980758-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-cwz.5","depends_on_id":"oro-cwz.3","type":"blocks","created_at":"2026-02-09T18:29:21.080497-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-dxu","title":"Comprehensive quality gate: add shellcheck, markdownlint, yamllint, biome, go-arch-lint, pyright, pylint","description":"Expand quality_gate.sh to cover all project tools. Plan at ~/.claude/plans/piped-nibbling-gosling.md. Decisions: biome for JSON, go-arch-lint with layers now, markdownlint lenient. Create .markdownlint.yml, .go-arch-lint.yml. Add shell/docs/python tiers. Scope all checks to exclude references/, yap/, archive/.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T16:43:20.103788-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T16:48:38.036548-05:00","closed_at":"2026-02-07T16:48:38.036548-05:00","close_reason":"13/13 checks pass. Commit: c4c46cf"}
{"id":"oro-e4c","title":"Worker script: add --verbose flag and stream live output","description":"oro-worker.sh runs claude -p with buffered output — log file stays empty until exit. Add --verbose to the claude -p call so tool use is visible in real time. Consider --output-format stream-json with a simple parser that shows [tool_name] lines, or just use --verbose for human-readable live output. Also add worktree cleanup to the script (currently manual).","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T14:23:57.34262-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T14:29:31.956264-05:00","closed_at":"2026-02-08T14:29:31.956264-05:00","close_reason":"Done in commit 9f5080b: added --verbose to claude -p call"}
{"id":"oro-ef6","title":"Priority sorting in dispatcher assignment","description":"Dispatcher should sort ready beads by priority (P0→P1→P2→P3) before assignment, not just take whatever bd ready returns first. Currently tryAssign calls beadSource.Ready() and picks the first result. Should sort by priority field. Acceptance: (1) when multiple beads are ready, highest priority (lowest number) is assigned first, (2) test with P0 and P2 beads verifies P0 assigned first.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:30.188548-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T11:12:47.313209-05:00","closed_at":"2026-02-09T11:12:47.313209-05:00","close_reason":"Tests pass, gate clean. Commit: 3ec82f2"}
{"id":"oro-ef8","title":"Protocol: directive types (enum + command struct)","description":"Define Directive enum (start/stop/pause/focus) and related types in pkg/protocol/directive.go. Test: go test ./pkg/protocol/... -run TestDirective -v. Acceptance: directive constants defined, Command struct matches commands table.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:34.217696-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T17:53:18.630934-05:00","closed_at":"2026-02-07T17:53:18.630934-05:00","close_reason":"Completed: directive.go with Directive enum, Command struct, Valid() method. 3/3 tests passing.","dependencies":[{"issue_id":"oro-ef8","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.881412-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-fza","title":"Foundation: Go module + CI pipeline + quality gate script","description":"Set up the project foundation before any feature bead can execute. Covers: (1) Go module init (go mod init, directory structure: cmd/, internal/, pkg/). (2) CI pipeline (GitHub Actions: go test, go vet, golangci-lint, biome for JSON/YAML). (3) Quality gate script (ad_hoc/quality_gate.sh — runs all checks locally, same as CI). (4) Makefile or taskfile with standard targets (build, test, lint, fmt). (5) First passing test (trivial, proves CI works end-to-end). This bead must pass CI before any feature bead starts. No feature code — just scaffolding.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:47:18.13366-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T16:32:47.234951-05:00","closed_at":"2026-02-07T16:32:47.234951-05:00","close_reason":"Tests pass, lint clean, CI yaml ready. Commit: db91516"}
{"id":"oro-gcr","title":"Review go-arch-lint config: deepScan vs DI pattern","description":"deepScan was disabled because internal/runners satisfying pkg/ interfaces was flagged as a violation. Options: (1) keep off, (2) move runners into pkg/ alongside interfaces (idiomatic Go), (3) find go-arch-lint v3 exclusion config for DI. Investigate which approach best matches our cmd/internal/pkg architecture. Current state: deepScan=false in .go-arch-lint.yml.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:01:52.195892-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:13:15.172117-05:00","closed_at":"2026-02-08T03:13:15.172117-05:00","close_reason":"Re-enabled deepScan globally, scoped exclusion to internal component via per-component override. Removed duplicate ExecGitRunner from pkg/merge. go-arch-lint, tests, and golangci-lint all pass clean."}
{"id":"oro-gjb","title":"Add stuck detection via QG output hashing to dispatcher","description":"DonePayload gets QGOutput string field. Dispatcher hashes QGOutput on each failed DONE. Track per-bead qgStuckTracker. If same hash appears 3+ times consecutively, escalate instead of re-assigning. QGOutput is for stuck detection only, not forwarded to worker prompt.","acceptance_criteria":"Test: pkg/dispatcher/dispatcher_test.go:TestHandleDone_QGStuckDetection | Cmd: go test -race -count=1 ./pkg/dispatcher/... -run TestHandleDone_QGStuck | Assert: 3 identical QG outputs trigger escalation instead of re-assign","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T01:24:17.093128-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T14:05:29.52232-05:00","closed_at":"2026-02-10T14:05:29.52232-05:00","close_reason":"Tests pass, quality gate clean. Stuck detection via QG output hashing implemented.","dependencies":[{"issue_id":"oro-gjb","depends_on_id":"oro-7ot","type":"blocks","created_at":"2026-02-10T01:25:00.087172-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-gjb","depends_on_id":"oro-kv1","type":"blocks","created_at":"2026-02-10T01:25:00.382053-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-gys","title":"Audit and consolidate .claude/skills — remove duplicates, merge overlapping skills","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:12:39.868019-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T15:13:24.384203-05:00","closed_at":"2026-02-07T15:13:24.384203-05:00","close_reason":"Wrong scope — issue was about slash commands, not skills"}
{"id":"oro-gzi","title":"claude -p hangs when spawned as subprocess — worker cannot execute beads","description":"During dogfood run, oro worker spawns 'claude -p \u003cprompt\u003e --model claude-opus-4-6' via exec.CommandContext. The process starts (visible in ps aux with correct args and cwd set to worktree) but produces zero output, zero stderr, zero debug output, and uses \u003c1s CPU over 8+ minutes. Manually running 'timeout 30 claude -p \"Say hello\"' from the shell also hangs. This blocks all real bead execution. Investigate: TTY requirement, concurrent instance issues, initialization blocking, API auth in subprocess context.","status":"open","priority":2,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T10:46:12.560629-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T10:46:12.560629-05:00"}
{"id":"oro-hh0","title":"Implement graceful shutdown protocol (PrepareShutdown → save → ShutdownApproved)","description":"Add MsgPrepareShutdown (dispatcher→worker) and MsgShutdownApproved (worker→dispatcher). Flow: (1) Dispatcher sends MsgPrepareShutdown with timeout. (2) Worker saves context — populates HandoffPayload with learnings/decisions, sends MsgHandoff, then sends MsgShutdownApproved. (3) Dispatcher waits up to timeout for approval, then kills. If worker doesn't respond within timeout, hard kill (existing MsgShutdown behavior). Ref: pkg/protocol/message.go, pkg/worker/worker.go (Run loop, MsgShutdown case), pkg/dispatcher/dispatcher.go (shutdown flow). Pattern from: cs50victor/claude-code-teams-mcp ShutdownRequest/ShutdownApproved.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestGracefulShutdown | Cmd: go test -race ./pkg/worker/... ./pkg/dispatcher/... | Assert: worker responds to PrepareShutdown by saving context and sending ShutdownApproved; dispatcher waits for approval before kill; hard kill after timeout","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:23.964639-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:54:22.160746-05:00","closed_at":"2026-02-08T01:54:22.160746-05:00","close_reason":"Implemented graceful shutdown protocol: MsgPrepareShutdown (dispatcher-\u003eworker) and MsgShutdownApproved (worker-\u003edispatcher). Worker responds by saving context via HandoffPayload, sending ShutdownApproved, then killing subprocess. Dispatcher waits for approval or falls back to hard kill on timeout. All tests pass, zero lint issues.","dependencies":[{"issue_id":"oro-hh0","depends_on_id":"oro-adw","type":"blocks","created_at":"2026-02-08T01:05:42.60271-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-i59","title":"Verify coverage agents and push (merge, worker, dispatcher test coverage to 90%)","description":"3 coverage agents running in background (merge a029c50, worker a804b0b, dispatcher ad56af2). Each writes tests to *_test.go in their package. After all complete: verify 90%+ total coverage, run golangci-lint, commit tests, then push. Quality gate now requires 90% min coverage and combines race+coverage in one run.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T23:20:53.990446-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T23:39:21.69494-05:00","closed_at":"2026-02-07T23:39:21.69494-05:00","close_reason":"Coverage at 93.1%, all packages above 90% minimum"}
{"id":"oro-ifg","title":"RunQualityGate: capture and return script output","description":"RunQualityGate currently returns (bool, error) and discards stdout/stderr. Change signature to (passed bool, output string, err error) using CombinedOutput. DonePayload.QGOutput already exists — this provides the data to populate it.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestRunQualityGate_CapturesOutput | Cmd: go test -run TestRunQualityGate -v ./pkg/worker/ | Assert: output string contains script stdout/stderr on both pass and fail","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T13:51:35.869606-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T14:01:29.32551-05:00","closed_at":"2026-02-10T14:01:29.32551-05:00","close_reason":"Tests pass, quality gate clean"}
{"id":"oro-is9","title":"Replace polling with push: UDS directives + fsnotify for beads","description":"Current dispatcher uses polling (10s interval) for both commands table and bd ready. Replace with: (1) Manager sends directives via UDS (manager connects to dispatcher socket as a client, sends directive JSON messages). Add oro directive CLI command. (2) Dispatcher watches .beads/ via fsnotify instead of polling bd ready. Remove commandLoop polling. Remove assignLoop polling. Keep heartbeat loop (that's inherently periodic). Ref: docs/plans/2026-02-08-oro-architecture-spec.md","notes":"Decomposed into 3 child beads: oro-is9.1 (UDS directive handler), oro-is9.2 (oro directive CLI), oro-is9.3 (fsnotify watcher). Start with oro-is9.1.","status":"closed","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T12:19:49.955724-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T15:21:58.228561-05:00","closed_at":"2026-02-08T15:21:58.228561-05:00","close_reason":"All sub-beads (is9.1, is9.2, is9.3) merged to main","dependencies":[{"issue_id":"oro-is9","depends_on_id":"oro-cfp","type":"blocks","created_at":"2026-02-08T12:20:20.55853-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-is9.1","title":"Add UDS directive handler to dispatcher","description":"Replace commandLoop polling with direct UDS directive handling. Manager connects as client, sends DIRECTIVE message, dispatcher responds with ACK. Remove commandLoop() and processCommands(). Ref: docs/plans/2026-02-08-oro-architecture-spec.md lines 93-99.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T14:31:07.935346-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T14:53:50.568724-05:00","closed_at":"2026-02-08T14:53:50.568724-05:00","close_reason":"Merged to main at 76d6377","dependencies":[{"issue_id":"oro-is9.1","depends_on_id":"oro-is9","type":"parent-child","created_at":"2026-02-08T14:31:07.936409-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-is9.2","title":"Add 'oro directive' CLI command","description":"Add new CLI command 'oro directive \u003cop\u003e [args]' that connects to dispatcher UDS socket, sends DIRECTIVE message, waits for ACK, then disconnects. Supports ops: start, stop, pause, resume, scale, focus, status. Ref: docs/plans/2026-02-08-oro-architecture-spec.md lines 112-122.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T14:31:16.811035-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T15:21:37.885037-05:00","closed_at":"2026-02-08T15:21:37.885037-05:00","close_reason":"Merged to main","dependencies":[{"issue_id":"oro-is9.2","depends_on_id":"oro-is9","type":"parent-child","created_at":"2026-02-08T14:31:16.812083-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-is9.2","depends_on_id":"oro-is9.1","type":"blocks","created_at":"2026-02-08T14:31:33.946318-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-is9.3","title":"Replace bd ready polling with fsnotify watcher","description":"Watch .beads/ directory via fsnotify. On file change, re-run bd ready and tryAssign(). Remove assignLoop() ticker-based polling. Keep 60s fallback poll as safety net. Ref: docs/plans/2026-02-08-oro-architecture-spec.md lines 85-87.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T14:31:25.766018-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T15:21:37.886822-05:00","closed_at":"2026-02-08T15:21:37.886822-05:00","close_reason":"Merged to main","dependencies":[{"issue_id":"oro-is9.3","depends_on_id":"oro-is9","type":"parent-child","created_at":"2026-02-08T14:31:25.767007-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-is9.3","depends_on_id":"oro-is9.1","type":"blocks","created_at":"2026-02-08T14:31:34.043171-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jhs","title":"Review rejection counter and feedback forwarding","description":"Track review rejection count per bead in dispatcher. When ops reviewer returns REJECTED, forward rejection feedback in the re-ASSIGN message to the worker. After 2 rejection cycles on the same bead, escalate to manager instead of re-assigning. Acceptance: (1) dispatcher tracks rejection count per bead, (2) re-ASSIGN includes reviewer feedback text, (3) 3rd rejection escalates to manager via tmux send-keys.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:12.237457-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T11:15:39.569464-05:00","closed_at":"2026-02-09T11:15:39.569464-05:00","close_reason":"Tests pass, gate clean. Commit: 104edc0"}
{"id":"oro-jj2","title":"Hello world: add cmd/hello/main.go that prints greeting","description":"Create a minimal cmd/hello/main.go that prints 'Hello from oro worker\\!' and exits. Include a test in cmd/hello/main_test.go that verifies the output. This is a smoke test for the worker execution loop.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T14:16:08.128557-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T14:22:21.149602-05:00","closed_at":"2026-02-08T14:22:21.149602-05:00","close_reason":"Worker smoke test complete — hello world merged to main"}
{"id":"oro-jlz","title":"Investigate bash tool death after worktree removal","description":"Bash tool becomes completely non-functional (every command returns exit code 1, no output) after git worktree remove --force when the shell's cwd was inside or related to the removed worktree. Happened twice this session: (1) after worktree removal + failed git rebase chain, (2) after worktree removal inside a chained command. Only recovers after user intervention (likely /clear or session restart). Root cause unknown — could be shell cwd invalidation, hook interaction, or sandbox state corruption. Need to reproduce reliably and add a safeguard. Workaround: never remove a worktree in a chained command — do it standalone, then verify bash works before continuing.","status":"closed","priority":0,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T20:55:04.18538-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T21:36:05.974142-05:00","closed_at":"2026-02-07T21:36:05.974142-05:00","close_reason":"Hook guard + skill update landed. PreToolUse blocks dangerous worktree removal. 26 tests."}
{"id":"oro-jtq","title":"Dispatcher scale directive: process manager spawns/kills oro worker processes","description":"Add scale directive handling to pkg/dispatcher/. Three pieces: (1) applyDirective() handles DirectiveScale — stores target worker count in dispatcher state. (2) ProcessManager interface with Spawn(id string) (*os.Process, error) and Kill(id string) error methods. Default implementation uses exec.Command to run 'oro worker --socket=\u003cpath\u003e --id=\u003cid\u003e'. (3) reconcileScale() called after scale directive: compares target vs len(connected workers), spawns new workers if under target, calls GracefulShutdownWorker for excess (idle first, then newest busy). ACK response includes detail like 'target=5, spawning 3'. Acceptance: (1) Test: send scale directive, verify target stored. (2) Test: reconcileScale spawns correct number of workers (mock ProcessManager). (3) Test: scale down calls GracefulShutdownWorker on excess workers. (4) Test: ACK includes correct detail string.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:26:13.785815-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:13:46.239949-05:00","closed_at":"2026-02-09T00:13:46.239949-05:00","close_reason":"Scale directive + ProcessManager + reconcileScale with 5 tests","dependencies":[{"issue_id":"oro-jtq","depends_on_id":"oro-9qf","type":"blocks","created_at":"2026-02-08T23:26:24.883827-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw","title":"Epic: Memory CLI for workers","description":"Workers (Claude Code sessions) need CLI commands to fully interact with the memory system. Currently only 'oro remember' and 'oro recall' exist. Workers need to list, delete, consolidate, and have real-time extraction wired. This is essential for workers to manage project knowledge across sessions.","status":"open","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:42:46.138566-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:42:46.138566-05:00"}
{"id":"oro-jtw.1","title":"oro memories list — browse/filter memories","description":"Add 'oro memories list' CLI command. Wraps Store.List() which already exists. Flags: --type (lesson|decision|gotcha|pattern|self_report), --tag, --limit (default 20). Output: tabular format with id, type, content (truncated), confidence, created_at. Workers need this to see what the project knows. Acceptance: Test: cmd/oro/memory_test.go:TestMemoriesList | Cmd: go test ./cmd/oro/... -run TestMemoriesList | Assert: lists memories filtered by type and tag.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:43:00.194424-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:32:32.907113-05:00","closed_at":"2026-02-10T11:32:32.907113-05:00","close_reason":"Tests pass, quality gate clean","dependencies":[{"issue_id":"oro-jtw.1","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T18:43:00.195201-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw.2","title":"oro forget \u003cid\u003e — delete a memory","description":"Add 'oro forget \u003cid\u003e' CLI command. Wraps Store.Delete() which already exists. Takes one or more integer IDs. Confirms deletion with output. Workers need this to remove stale or incorrect memories. Acceptance: Test: cmd/oro/memory_test.go:TestForget | Cmd: go test ./cmd/oro/... -run TestForget | Assert: deletes memory by id, returns error for nonexistent id.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:43:04.645751-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:35:08.306832-05:00","closed_at":"2026-02-10T11:35:08.306832-05:00","close_reason":"Tests pass, committed and pushed","dependencies":[{"issue_id":"oro-jtw.2","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T18:43:04.646463-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw.3","title":"oro memories consolidate — dedup and prune stale","description":"Add 'oro memories consolidate' CLI command. Wraps Store.Consolidate() which already exists. Prunes memories below a decayed-score threshold (default 0.1) and merges near-duplicates. Outputs stats: how many pruned, how many merged, how many remaining. Workers or maintainers run this periodically. Acceptance: Test: cmd/oro/memory_test.go:TestConsolidate | Cmd: go test ./cmd/oro/... -run TestConsolidate | Assert: removes stale memories, reports stats.","status":"open","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:43:08.958527-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T18:43:08.958527-05:00","dependencies":[{"issue_id":"oro-jtw.3","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T18:43:08.959264-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw.4","title":"Wire worker SetMemoryStore in dispatcher","description":"Worker.SetMemoryStore() exists but the dispatcher never calls it. This means real-time [MEMORY] marker extraction (processOutput) and implicit memory extraction (extractImplicitMemories on handoff/done) are dead code paths. Fix: in dispatcher's worker creation/assignment, call worker.SetMemoryStore(d.memories). This completes the memory extraction pipeline — workers capture memories in real-time instead of only via structured HandoffPayload fields. Acceptance: Test: pkg/integration/dispatcher_worker_test.go:TestWorkerMemoryExtraction | Cmd: go test ./pkg/integration/... -run TestWorkerMemoryExtraction | Assert: [MEMORY] markers in worker stdout are persisted to memories table.","status":"closed","priority":2,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:43:13.367955-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T21:43:06.126669-05:00","closed_at":"2026-02-09T21:43:06.126669-05:00","close_reason":"Tests pass, worker now wires SetMemoryStore via shared state.db. Commit: e433291","dependencies":[{"issue_id":"oro-jtw.4","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T18:43:13.368627-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-jtw.4","depends_on_id":"oro-bk6","type":"parent-child","created_at":"2026-02-09T20:09:59.93798-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw.5","title":"Progressive disclosure for ForPrompt() context injection","description":"Instead of dumping 5 full memories into every worker prompt, inject a compact index (id, type, title, ~tokens). Workers fetch details with 'oro recall --id=N'. Saves ~5x tokens per assignment. Inspired by claude-mem's 3-layer retrieval pattern (index → timeline → detail) which reduced token waste from 94% to 6%. Changes: (1) ForPrompt() returns compact table format instead of full content, (2) Add 'oro recall --id=N' flag for fetching single memory by ID, (3) Update AssignPayload.MemoryContext format. Acceptance: ForPrompt() output is \u003c200 tokens for 10 memories; oro recall --id=5 returns full memory content.","status":"open","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:10:04.247303-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T19:10:04.247303-05:00","dependencies":[{"issue_id":"oro-jtw.5","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T19:10:04.248048-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-jtw.5","depends_on_id":"oro-jtw.1","type":"blocks","created_at":"2026-02-09T19:10:25.016213-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw.6","title":"File tracking in memories (files_read/files_modified)","description":"Add files_read and files_modified fields to InsertParams and memories table. Workers know what files they touched — persist this for spatial context. Enables queries like 'what did we learn about dispatcher.go?'. Changes: (1) Add files_read TEXT and files_modified TEXT columns to memories table (JSON arrays), (2) Extend InsertParams with optional FilesRead/FilesModified []string, (3) Update persistHandoffContext to pass file lists from HandoffPayload, (4) Update Search to optionally filter by file path. Acceptance: memories inserted with file tracking; 'oro recall' can filter by file path.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:10:08.93937-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:36:35.303245-05:00","closed_at":"2026-02-10T11:36:35.303245-05:00","close_reason":"Tests pass, all changes committed. File tracking added to memories (files_read/files_modified columns, InsertParams fields, SearchOpts.FilePath filter, persistHandoffContext integration, oro recall --file flag, DB migration). Commits: 653910a, cbfcf12","dependencies":[{"issue_id":"oro-jtw.6","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T19:10:08.940116-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-jtw.7","title":"Structured session summaries (type=summary in memories)","description":"At worker completion, persist a structured session summary as type=summary in the memories table. Option A (zero schema change): store as formatted content string. Flow: (1) Add Summary struct to HandoffPayload with Request/Investigated/Learned/Completed/NextSteps fields, (2) Worker populates Summary before sending HANDOFF or DONE, (3) Dispatcher's persistHandoffContext() inserts as type=summary with bead_id and worker_id, (4) ForPrompt() can surface summaries for bead continuity. Content format: 'request: X | investigated: Y | learned: Z | completed: W | next_steps: V'. Later: promote to dedicated session_summaries table when progressive disclosure lands. Acceptance: HandoffPayload includes Summary; dispatcher persists it; next worker on same bead sees it in ForPrompt().","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:10:13.908933-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:41:23.024204-05:00","closed_at":"2026-02-10T11:41:23.024204-05:00","close_reason":"Tests pass, all 4 tests green, committed as 192d586. Summary struct in HandoffPayload, persistence in persistHandoffContext, ForPrompt surfaces via FTS5.","dependencies":[{"issue_id":"oro-jtw.7","depends_on_id":"oro-jtw","type":"parent-child","created_at":"2026-02-09T19:10:13.909691-05:00","created_by":"Aakash Shah"}],"comments":[{"id":7,"issue_id":"oro-jtw.7","author":"Aakash Shah","text":"LEARNED: Claude Code PostToolUse hooks (gofmt/goimports) run after every Edit/Write and will strip unused imports BEFORE the code using them can be added in a follow-up edit. Solution: write all interdependent changes via a single Python script, not sequential Edit tool calls.","created_at":"2026-02-10T16:46:11Z"},{"id":8,"issue_id":"oro-jtw.7","author":"Aakash Shah","text":"LEARNED: When concurrent agents share a working tree and push to main, feature branch checkouts get silently lost. The only reliable strategy is: write all files via Python in one Bash call, then chain gofmt + go test + git add + git commit --no-verify in the same Bash invocation. Never rely on file persistence between separate tool calls.","created_at":"2026-02-10T16:46:24Z"}]}
{"id":"oro-kv1","title":"Epic: Ralph loop improvements — attempt counting, stuck detection, memory persistence","status":"open","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T01:23:35.229651-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T01:23:35.229651-05:00"}
{"id":"oro-lar","title":"Add bd sync to dispatcher shutdown cleanup","description":"shutdownCleanup() in dispatcher does not call bd sync. Per lifecycle spec Phase 9, shutdown should include bd sync --flush-only to ensure bead state is persisted to git. Add bd sync as final step in shutdownCleanup() after worktree removal. Acceptance: (1) shutdownCleanup runs bd sync, (2) test verifies bd sync is called during shutdown sequence.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:25.600936-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T11:57:09.460255-05:00","closed_at":"2026-02-09T11:57:09.460255-05:00","close_reason":"Tests pass. Commit: 7294240"}
{"id":"oro-lcg","title":"End-to-end integration test: oro start → assign → done → merge → stop","description":"No integration test exercises the full lifecycle. Create a test (cmd/oro/e2e_test.go or tests/e2e_test.go) that: (1) starts dispatcher in daemon-only mode, (2) connects a mock worker via UDS, (3) inserts a start directive, (4) verifies bead assignment, (5) sends DONE with QualityGatePassed=true, (6) verifies merge is attempted, (7) sends stop and verifies clean shutdown. Use test doubles for bd, git, and claude. Acceptance: go test -run TestE2E passes and covers the full lifecycle.","status":"in_progress","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T11:38:08.382931-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T01:01:27.960991-05:00","dependencies":[{"issue_id":"oro-lcg","depends_on_id":"oro-mgf","type":"blocks","created_at":"2026-02-08T11:38:24.535299-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-lcg","depends_on_id":"oro-by8","type":"blocks","created_at":"2026-02-08T11:38:24.70139-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-lcg","depends_on_id":"oro-20s","type":"blocks","created_at":"2026-02-08T23:06:16.879195-05:00","created_by":"Aakash Shah"}],"comments":[{"id":6,"issue_id":"oro-lcg","author":"Aakash Shah","text":"LEARNED: Dispatcher assigns epics (not just leaf tasks) to workers. tryAssign calls beads.Ready() which returns ALL ready beads including epics. Need to filter to leaf tasks only, or workers will get assigned epics they can't execute.","created_at":"2026-02-10T15:21:21Z"}]}
{"id":"oro-ldf","title":"Epic: Embedding-based memory retrieval (local embeddings + SQLite + hybrid RRF search)","description":"BCR strategy: local embeddings at write time, store as BLOB in SQLite memories table (column already reserved), cosine similarity at read time. Combine with FTS5 BM25 via CC-v3 hybrid RRF scoring: Score = 1/(60+text_rank) + 1/(60+vector_rank). Subtasks: research Go embedding libraries, select model + dimensions, implement embed-on-INSERT, implement cosine similarity search, calibrate RRF weights. Depends on core memory table existing (oro-w6n).","status":"closed","priority":3,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T12:27:13.256312-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:33:45.110605-05:00","closed_at":"2026-02-08T01:33:45.110605-05:00","close_reason":"Implemented embedding-based semantic search: TF-IDF embedder (pure Go), embed-on-INSERT, cosine similarity, hybrid RRF search (FTS5+vector), 26 new tests, 92.6% coverage, linter clean","dependencies":[{"issue_id":"oro-ldf","depends_on_id":"oro-w6n","type":"blocks","created_at":"2026-02-07T12:27:31.399178-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-mak","title":"Refactor Worker.Run to reduce cognitive complexity (currently 26, limit 20)","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T00:20:58.921098-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:05:56.751212-05:00","closed_at":"2026-02-08T01:05:56.751212-05:00","close_reason":"Worker.Run complexity 26→7 via readMessages() and handleConnectionError() extraction"}
{"id":"oro-mgf","title":"Scale directive + worker process lifecycle (dispatcher spawns workers)","description":"Updated: the MANAGER spawns workers (not the dispatcher). Manager sends 'scale N' directive via UDS. Dispatcher manages worker processes to match target size. Needs: (1) oro worker subcommand (cmd/oro/cmd_worker.go), (2) scale directive handling in dispatcher, (3) worker process spawning/killing to match target. Blocked on oro-cfp (spec finalization) and oro-is9 (UDS directives).","notes":"Decomposed: 3 concerns (worker binary, scale directive, process manager) touching 7+ files","status":"closed","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T11:37:58.058987-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:33:58.75435-05:00","closed_at":"2026-02-09T00:33:58.75435-05:00","close_reason":"Implemented ExecProcessManager, wired into buildDispatcher, all tests pass","dependencies":[{"issue_id":"oro-mgf","depends_on_id":"oro-cfp","type":"blocks","created_at":"2026-02-08T12:20:20.364891-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-mgf","depends_on_id":"oro-is9","type":"blocks","created_at":"2026-02-08T12:20:20.464042-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-mgf","depends_on_id":"oro-0hz","type":"blocks","created_at":"2026-02-08T23:06:01.829816-05:00","created_by":"Aakash Shah"}],"comments":[{"id":3,"issue_id":"oro-mgf","author":"Aakash Shah","text":"LEARNED: PreToolUse hooks must use permissionDecision: deny, not decision: block. The latter is silently ignored by Claude Code, meaning guard hooks appear to work in unit tests but don't actually block commands at runtime.","created_at":"2026-02-09T15:10:14Z"},{"id":4,"issue_id":"oro-mgf","author":"Aakash Shah","text":"LEARNED: cd into a worktree directory persists in the Bash tool cwd. If that worktree is then removed, ALL subsequent bash commands fail with exit code 1 and no output. The only fix is /clear to reset the shell session. Prevention: never cd into worktrees — use absolute paths for go test and other commands.","created_at":"2026-02-09T15:10:26Z"}]}
{"id":"oro-nqi","title":"Epic: Oro TUI dashboard (Charm/Bubble Tea kanban board with drilldowns)","description":"Linear-inspired TUI dashboard for monitoring beads and agents. Kanban board default view, tabbed drilldowns (overview, worker, diff, deps, memory). Built with Bubble Tea + Bubbles + Lip Gloss. Spec: docs/plans/2026-02-08-tui-dashboard-spec.md. Invoked via 'oro dash'.","status":"open","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:34:39.001687-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:34:39.001687-05:00"}
{"id":"oro-nqi.1","title":"Research TUI reference implementations and Linear design philosophy","description":"Study these repos for TUI design patterns: github.com/Dicklesworthstone/beads_viewer, github.com/w3dev33/beads-task-issue-tracker, github.com/cameronsjo/beadspace, github.com/AvivK5498/Beads-Kanban-UI, github.com/rhydlewis/beads-dashboard, github.com/mantoni/beads-ui, github.com/zjrosen/perles. Also study Linear design philosophy: lennysnewsletter.com/p/how-linear-builds-product and karrisaarinen tweet thread. Incorporate learnings into docs/plans/2026-02-08-tui-dashboard-spec.md.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:39:26.371426-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:46:33.70799-05:00","closed_at":"2026-02-08T02:46:33.70799-05:00","close_reason":"Researched 7 beads viewer repos + Linear design philosophy. Updated TUI spec with: design philosophy section, reference table, insights view with graph metrics, search overlay, triage auto-flags, live reload via fsnotify, robot mode, epic progress bars, dependency explorer navigation, heartbeat health colors.","dependencies":[{"issue_id":"oro-nqi.1","depends_on_id":"oro-nqi","type":"parent-child","created_at":"2026-02-08T02:39:26.372127-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-o7r","title":"Redesign: Manager is a Claude session, not a Go binary — update orchestrator architecture","description":"Previous design (docs/plans/2026-02-07-orchestrator-ipc-comparison.md) assumed Manager = Go binary with UDS server. Actual intent: Manager is a Claude session that coordinates workers, gatekeeps merges, handles cleanup/relaunch. Architect is separate interactive session for planning/speccing. This affects: (1) IPC design — Claude sessions don't natively speak UDS, may still need thin Go/binary wrappers for lifecycle but Manager itself is Claude. (2) All downstream beads: oro-w6n, oro-773, oro-r7b, oro-68t. (3) Manager now needs code search tools (full stack) for merge review. May still want daemons/binaries for plumbing, but they serve the Manager session, not replace it.","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T13:02:52.24744-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T14:16:21.366388-05:00","closed_at":"2026-02-07T14:16:21.366388-05:00","close_reason":"Redesign complete. Manager is Claude session, Dispatcher is Go binary. Three docs updated: manager-redesign.md (new), oro-lifecycle.md (new), orchestrator-ipc-comparison.md (marked historical). All downstream beads updated."}
{"id":"oro-on7","title":"Spec: Agent swarm patterns — parallel agents with git worktrees, commits, and coordination","description":"Current dispatching-parallel-agents skill is too light: agents can't commit, no worktree isolation, no coordination protocol. Need to spec swarm patterns that allow parallel agents to: (1) work in isolated worktrees, (2) commit independently, (3) merge results back to main without conflicts, (4) coordinate when tasks have dependencies. Reference: Oro's own Worker model (worktree per worker), CC-v3's parallel agent contracts, compound-eng's resolve_parallel command. Should cover: worktree lifecycle, commit policy (agent commits vs manager commits), merge strategy (ff-only vs rebase), conflict resolution, and how this maps to the dispatching-parallel-agents skill update.","status":"closed","priority":1,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T18:53:47.403645-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:59:09.861112-05:00","closed_at":"2026-02-07T18:59:09.861112-05:00","close_reason":"Spec written to docs/plans/2026-02-07-agent-swarm-spec.md"}
{"id":"oro-p1l","title":"Wire subprocess exit to RunQualityGate → SendDone","description":"proc.Wait() at worker.go:314-317 is fire-and-forget. After Wait returns, the worker must: (1) call RunQualityGate(ctx, worktree), (2) call SendDone(ctx, passed) with QGOutput populated. This closes the gap where subprocess exit triggers heartbeat timeout instead of proper DONE reporting.","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestSubprocessExit_RunsQGAndSendsDone | Cmd: go test -run TestSubprocessExit_RunsQGAndSendsDone -v ./pkg/worker/ | Assert: after subprocess exits, worker sends MsgDone with correct QualityGatePassed bool and QGOutput string","status":"in_progress","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T13:51:49.92384-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T14:04:42.506466-05:00","dependencies":[{"issue_id":"oro-p1l","depends_on_id":"oro-ifg","type":"blocks","created_at":"2026-02-10T13:52:00.567122-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-p6t","title":"Spec session-end learning synthesis via handoff/checkpoint triggers","description":"Close the capture→documentation gap by surfacing learnings at the right moments.\n\nThe stop hook fires AFTER the response — it cannot inject context. Wrong trigger.\n\nRight triggers (all have conversation context):\n1. create-handoff skill — fires before session end, can review learnings and propose docs\n2. context-checkpoint skill — fires at bead boundaries, can batch-review accumulated learnings\n3. PostToolUse hook on git commit — catches 'work just landed' moment, can check if LEARNED entries exist for this bead\n\nIdeas:\n- Scan knowledge.jsonl for learnings from this session's beads\n- Surface undocumented learnings (prompt, don't auto-create)\n- Apply 3+ frequency threshold: same tag/pattern 3+ times → suggest solution doc or skill/rule\n- Keep lightweight — summarize and propose, don't auto-generate\n\nReference implementations:\n- CE compound-docs: auto-invokes on confirmation phrases, YAML schema, category dirs\n- CC-v3 compound-learnings: frequency thresholds (1=note, 2=consider, 3+=create), decision tree (sequence→skill, event→hook, heuristic→rule)\n- memory_capture.py already captures LEARNED: entries to knowledge.jsonl with auto-tagging\n\nOutput: Spec defining which triggers fire, what they check, and what they propose.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T18:50:45.543985-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T11:02:12.664139-05:00","closed_at":"2026-02-10T11:02:12.664139-05:00","close_reason":"Spec written: docs/plans/2026-02-10-session-end-learning-synthesis.md"}
{"id":"oro-ptz","title":"Preflight checks: verify tmux, claude, bd, git before oro start","description":"oro start depends on external tools (tmux, claude CLI, bd, git) but does no preflight validation. Add a preflight check function called from newStartCmd that verifies each tool is available (exec.LookPath) and prints clear error messages. Also check that the git repo is clean enough for worktree creation. Acceptance: oro start prints actionable error if any dependency is missing.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T11:37:59.187245-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T21:46:03.429692-05:00","closed_at":"2026-02-08T21:46:03.429692-05:00","close_reason":"Already implemented in cmd/oro/preflight.go — runPreflightChecks() validates tmux, claude, bd, git via exec.LookPath and checks git repo status. Called in newStartCmd before anything else."}
{"id":"oro-q63","title":"Protocol: SQLite schema DDL (embedded SQL string)","description":"Define schema DDL as embedded Go string constants in pkg/protocol/schema.go. Tables: events, assignments, commands, memories, memories_fts (FTS5). Test: go test ./pkg/protocol/... -run TestSchema -v. Acceptance: DDL string parses as valid SQL (exec against in-memory SQLite).","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:25.730068-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:34:31.79692-05:00","closed_at":"2026-02-07T20:34:31.79692-05:00","close_reason":"Tests pass, 3 tests (exec, tables, idempotent). Commit: a550b42","dependencies":[{"issue_id":"oro-q63","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.726436-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-q63","depends_on_id":"oro-1s5","type":"blocks","created_at":"2026-02-07T18:20:19.94731-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-q9y","title":"Trigger PRIORITY_CONTENTION escalation when P0 arrives with full slots","description":"EscPriorityContention type exists but is never triggered. When all worker slots are busy and a new P0 bead arrives, escalate to Manager to decide what to preempt. Acceptance: Test: pkg/dispatcher/dispatcher_test.go:TestPriorityContention | Cmd: go test ./pkg/dispatcher/... -run TestPriorityContention | Assert: P0 arrival with full slots triggers EscPriorityContention","status":"open","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:34:47.113191-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T19:34:47.113191-05:00"}
{"id":"oro-qqr","title":"Dispatcher: structured escalation format [ORO-DISPATCH]","description":"Change dispatcher escalation messages to use typed [ORO-DISPATCH] format per spec (lines 609-614). Format: '[ORO-DISPATCH] \u003cTYPE\u003e: \u003cbead-id\u003e — \u003csummary\u003e. \u003cdetails\u003e.' Types: MERGE_CONFLICT, STUCK, PRIORITY_CONTENTION, WORKER_CRASH, STATUS, DRAIN_COMPLETE. Currently TmuxEscalator.Escalate() sends free-form strings. Add helper methods or a formatter that produces structured messages. Update existing escalation call sites in dispatcher.go (merge failure, review failure, etc). Update tests.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:50.869635-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:15:34.739756-05:00","closed_at":"2026-02-09T00:15:34.739756-05:00","close_reason":"Beacon injection + ORO_ROLE env var for both panes"}
{"id":"oro-r7b","title":"Implement: oro CLI (start/stop/status, directives, remember/recall commands)","description":"Oro CLI — single binary for session orchestration (tmux layout, daemon, manager/architect sessions) and memory interface (remember/recall). Spec: docs/plans/2026-02-08-oro-cli-spec.md","status":"closed","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:26.367571-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:24:19.227032-05:00","closed_at":"2026-02-08T02:24:19.227032-05:00","close_reason":"All child beads landed: CLI scaffold, daemon, tmux, remember/recall, manager prompt","dependencies":[{"issue_id":"oro-r7b","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.75552-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:10.356158-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.186671-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b","depends_on_id":"oro-98h","type":"blocks","created_at":"2026-02-08T01:08:57.627901-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.1","title":"CLI scaffold: cobra commands (start/stop/status/remember/recall)","acceptance_criteria":"Test: cmd/oro/main_test.go:TestCLICommands | Cmd: go test -race ./cmd/oro/... | Assert: all subcommands parse flags correctly, --help works","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:36.907018-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:53:36.097606-05:00","closed_at":"2026-02-08T01:53:36.097606-05:00","close_reason":"CLI scaffold complete: root cmd with --version, 5 subcommands (start/stop/status/remember/recall), cobra flags, 17 tests passing, 0 lint issues","dependencies":[{"issue_id":"oro-r7b.1","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:36.907791-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.2","title":"Daemon launcher: PID file, start/stop/health check, SIGTERM handler","acceptance_criteria":"Test: cmd/oro/daemon_test.go:TestDaemonLifecycle | Cmd: go test -race ./cmd/oro/... -run TestDaemon | Assert: starts dispatcher, writes PID, stops on SIGTERM, cleans PID file","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.015517-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:16:02.69826-05:00","closed_at":"2026-02-08T02:16:02.69826-05:00","close_reason":"Closed","dependencies":[{"issue_id":"oro-r7b.2","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.016205-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.2","depends_on_id":"oro-r7b.1","type":"blocks","created_at":"2026-02-08T01:19:47.883656-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.3","title":"tmux session manager: create oro session, split panes, launch architect+manager","acceptance_criteria":"Test: cmd/oro/tmux_test.go:TestTmuxLayout | Cmd: go test -race ./cmd/oro/... -run TestTmux | Assert: creates session with 2 panes, attaches, kills on stop","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.126759-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:16:02.699622-05:00","closed_at":"2026-02-08T02:16:02.699622-05:00","close_reason":"Closed","dependencies":[{"issue_id":"oro-r7b.3","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.127432-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.3","depends_on_id":"oro-r7b.1","type":"blocks","created_at":"2026-02-08T01:19:47.973729-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.4","title":"Manager prompt: autonomous bead execution loop with quality gate enforcement","acceptance_criteria":"Test: cmd/oro/manager_test.go:TestManagerPrompt | Cmd: go test -race ./cmd/oro/... -run TestManager | Assert: prompt includes bd ready loop, quality gate check, never-stop instruction","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.234957-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:24:19.15438-05:00","closed_at":"2026-02-08T02:24:19.15438-05:00","close_reason":"Manager prompt landed with 6 tests","dependencies":[{"issue_id":"oro-r7b.4","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.2357-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.4","depends_on_id":"oro-r7b.3","type":"blocks","created_at":"2026-02-08T01:19:48.062127-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-r7b.5","title":"Remember/recall commands: wire memory.Store to CLI subcommands","acceptance_criteria":"Test: cmd/oro/memory_test.go:TestRememberRecall | Cmd: go test -race ./cmd/oro/... -run TestRemember | Assert: remember inserts to SQLite, recall searches FTS5","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:19:37.340622-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:16:02.70093-05:00","closed_at":"2026-02-08T02:16:02.70093-05:00","close_reason":"Closed","dependencies":[{"issue_id":"oro-r7b.5","depends_on_id":"oro-r7b","type":"parent-child","created_at":"2026-02-08T01:19:37.341302-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-r7b.5","depends_on_id":"oro-r7b.1","type":"blocks","created_at":"2026-02-08T01:19:48.152165-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-rez","title":"Hook: LEARNED memory capture via bd comment","description":"PostToolUse hook that intercepts 'bd comment \u003cid\u003e LEARNED: ...' commands. Extracts structured entries into .beads/memory/knowledge.jsonl with auto-tagging, deduplication by key, and timestamp. Session-start surfaces recent learnings. Inspired by The-Claude-Protocol's memory-capture.sh. Acceptance: bd comment with LEARNED prefix creates searchable JSONL entry; recall.sh can find it by keyword.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T19:58:44.99118-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T20:03:22.719028-05:00","closed_at":"2026-02-07T20:03:22.719028-05:00","close_reason":"Tests pass, gate clean. Commit: b049852"}
{"id":"oro-rue","title":"Implement: ops agent spawner (short-lived claude -p for review, merge conflict, diagnosis)","description":"Dispatcher component that spawns short-lived claude -p processes for operational tasks. Covers: (1) Two-stage review: spawn reviewer ops agent in worker worktree, reads bd show + git diff, signals APPROVED/REJECTED. (2) Merge conflict resolution: spawn ops agent with both beads' annotations + conflict context. (3) Crash/stuck diagnosis: spawn ops agent to analyze stuck worker state. (4) Model routing: Opus 4.6 for judgment-heavy tasks (merge conflicts, architectural review), latest Sonnet for mechanical tasks (clean reviews, straightforward fixes). Ops agents share the worker pool — no net slot increase. Reference: docs/plans/2026-02-07-manager-redesign.md (Ops Agent Spawner section) and R6 two-stage review.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T15:25:31.980708-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:24:07.973013-05:00","closed_at":"2026-02-07T22:24:07.973013-05:00","close_reason":"Implemented pkg/ops with Spawner, Review/ResolveMergeConflict/Diagnose methods, Process/SubprocessSpawner interfaces, model routing, cancel/active lifecycle, prompt builders. 17 tests all passing, go vet clean.","dependencies":[{"issue_id":"oro-rue","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:26:24.403154-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-rue","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.26781-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-seg","title":"Spec: Memory search/retrieval algorithm (FTS5 + RRF + scoring)","description":"Design the search algorithm for oro recall. Prior art reviewed: BCR three-factor scoring (cosine × confidence × decay), CC-v3 hybrid RRF (1/(60+fts_rank) + 1/(60+vec_rank)), CC-v3 dedup at write (0.85 cosine threshold), FTS5 BM25 as day-one standalone. Key files: references/bcr recall.py, yap/reference/Continuous-Claude-v3/opc/scripts/core/recall_learnings.py. Decisions needed: RRF k-constant, decay half-life, dedup threshold, max memories injected into prompt, token budget per injection.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T12:31:21.477008-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:42:18.984075-05:00","closed_at":"2026-02-07T18:42:18.984075-05:00","close_reason":"Spec written to docs/plans/2026-02-07-memory-search-spec.md"}
{"id":"oro-sk5","title":"Manager beacon: 12-section template in Go","description":"Implement the full 12-section manager beacon template in cmd/oro/manager.go (replace the current 28-line managerPrompt). Sections per spec (lines 448-605): (1) role, (2) system map, (3) startup protocol, (4) oro CLI, (5) beads CLI, (6) decomposition heuristics, (7) scale policy, (8) escalation playbook, (9) human interaction guidelines, (10) dispatcher message format, (11) anti-patterns, (12) shutdown sequence. Accept: ManagerBeacon() returns the full template string. Unit test verifies all 12 sections present.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:31.230141-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T23:14:48.913413-05:00","closed_at":"2026-02-08T23:14:48.913413-05:00","close_reason":"Implemented full 12-section manager beacon per architecture spec"}
{"id":"oro-t3u","title":"P0: pre-push hook — quality gate + discovery logging before push","description":"Create a git pre-push hook that enforces: (1) ./quality_gate.sh passes (all 18 checks), (2) if any bead was closed this session, prompt/verify that discoveries were logged to docs/decisions-and-discoveries.md. This prevents agents from pushing code that skips the full quality gate (pre-commit only catches per-file lint, not cross-cutting checks like golangci-lint, go-arch-lint, govulncheck). Also update the dispatching-parallel-agents skill and any agent prompt templates to include quality gate in bead completion steps.","status":"closed","priority":0,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T18:06:50.451425-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:13:20.803067-05:00","closed_at":"2026-02-07T18:13:20.803067-05:00","close_reason":"Pre-push hook installed in .git/hooks/pre-push, runs full 18-check quality gate. Dispatching skill updated to require agents run quality gate before committing."}
{"id":"oro-tk7","title":"Design worker prompt template sections","description":"Define what sections oro-worker assembles before launching claude -p. Includes: bead details (from bd show), acceptance criteria, memory context, project CLAUDE.md, TDD/quality-gate instructions, worktree path, available tools.","status":"closed","priority":1,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T13:04:03.549409-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T13:32:50.776666-05:00","closed_at":"2026-02-08T13:32:50.776666-05:00","close_reason":"Resolved in prior session: 12-section worker prompt template in spec","dependencies":[{"issue_id":"oro-tk7","depends_on_id":"oro-cfp","type":"blocks","created_at":"2026-02-08T13:04:18.241145-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-u80","title":"Pinned memories: non-decaying boolean for permanent learnings","description":"Add pinned boolean to memories schema. Pinned memories skip time-decay scoring — always full weight. Use case: architectural decisions, permanent gotchas (e.g., never cd into worktrees). Schema: ALTER TABLE memories ADD COLUMN pinned INTEGER DEFAULT 0. Acceptance: Test: pkg/memory/memory_test.go:TestPinnedMemory | Cmd: go test ./pkg/memory/... -run TestPinned | Assert: pinned memories have decay=1.0 regardless of age","status":"open","priority":3,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:34:18.279598-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T19:34:18.279598-05:00"}
{"id":"oro-ujb","title":"Epic: End-to-end MVP — oro start launches tmux with working manager+dispatcher+workers","description":"Minimum to get oro start actually running: CLI scaffold, daemon launcher, tmux manager, manager prompt, quality gate at worker, memory wiring. Success = user types 'oro start', sees two tmux panes, manager starts chewing through beads, workers execute in worktrees, merges land on main with quality gate.","status":"closed","priority":1,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:20:02.655613-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:20:32.699959-05:00","closed_at":"2026-02-08T03:20:32.699959-05:00","close_reason":"All 6 children complete: unified interfaces, CLI beadsource, worktree manager, tmux escalator, daemon-only mode, full start flow. oro start now spawns dispatcher + tmux session end-to-end.","dependencies":[{"issue_id":"oro-ujb","depends_on_id":"oro-r7b","type":"blocks","created_at":"2026-02-08T01:20:15.911-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb","depends_on_id":"oro-98h","type":"blocks","created_at":"2026-02-08T01:20:15.992587-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb","depends_on_id":"oro-bat","type":"blocks","created_at":"2026-02-08T01:20:16.071743-05:00","created_by":"Aakash Shah"}],"comments":[{"id":2,"issue_id":"oro-ujb","author":"Aakash Shah","text":"LEARNED: go-arch-lint v3 deepScan is a boolean, not an object. When deepScan=true (default), it checks interface satisfaction across component boundaries. DI patterns (cmd passing ExecCommandRunner to satisfy pkg.CommandRunner) get flagged. Fix: either disable deepScan or place runners in internal/ which is allowed to depend on pkg.","created_at":"2026-02-08T08:00:29Z"}]}
{"id":"oro-ujb.1","title":"Wire oro start: spawn dispatcher subprocess + tmux session","description":"Fill in the TODO in cmd_start.go: (1) fork a child process running 'oro start --daemon-only' as the dispatcher, (2) call TmuxSession.Create() with the real ManagerPrompt() wired into the manager pane's claude -p command, (3) write PID file for the child, (4) print status. Acceptance: oro start creates tmux session 'oro' with 2 panes, dispatcher subprocess running with PID file. Test: cmd/oro/start_integration_test.go (mock tmux+subprocess, verify correct commands issued).","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:28:38.189812-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T03:18:00.342587-05:00","closed_at":"2026-02-08T03:18:00.342587-05:00","close_reason":"Implemented full oro start: spawns dispatcher subprocess via DaemonSpawner interface, waits for socket, creates tmux session with real ManagerPrompt, prints status","dependencies":[{"issue_id":"oro-ujb.1","depends_on_id":"oro-ujb","type":"parent-child","created_at":"2026-02-08T02:28:38.190515-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb.1","depends_on_id":"oro-ujb.5","type":"blocks","created_at":"2026-02-08T02:29:07.232665-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-ujb.2","title":"Production BeadSource: shell out to bd ready/show/close","description":"Implement BeadSource interface (dispatcher.go) with a production struct that shells out to 'bd ready --json', 'bd show \u003cid\u003e --json', 'bd close \u003cid\u003e --reason=...'. Parse JSON output into Bead/BeadDetail structs. Acceptance: unit tests with exec mock, integration test that calls real bd binary. Test: pkg/dispatcher/beadsource_test.go.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:28:42.894168-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:36:10.921964-05:00","closed_at":"2026-02-08T02:36:10.921964-05:00","close_reason":"Merged to main","dependencies":[{"issue_id":"oro-ujb.2","depends_on_id":"oro-ujb","type":"parent-child","created_at":"2026-02-08T02:28:42.894918-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-ujb.3","title":"Production WorktreeManager: git worktree add/remove","description":"Implement WorktreeManager interface (dispatcher.go) with a production struct that runs 'git worktree add .worktrees/\u003cbeadID\u003e -b agent/\u003cbeadID\u003e main' and 'git worktree remove .worktrees/\u003cbeadID\u003e --force'. Acceptance: unit tests with exec mock. Test: pkg/dispatcher/worktree_manager_test.go.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:28:47.330343-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:36:11.005931-05:00","closed_at":"2026-02-08T02:36:11.005931-05:00","close_reason":"Merged to main (needs CommandRunner fix)","dependencies":[{"issue_id":"oro-ujb.3","depends_on_id":"oro-ujb","type":"parent-child","created_at":"2026-02-08T02:28:47.331268-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-ujb.4","title":"Production Escalator: tmux send-keys to manager pane","description":"Implement Escalator interface (dispatcher.go) with a production struct that uses 'tmux send-keys -t oro:0.1' to send escalation messages to the manager pane. Acceptance: unit test with mock runner. Test: pkg/dispatcher/escalator_test.go.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:28:51.786956-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:36:11.097964-05:00","closed_at":"2026-02-08T02:36:11.097964-05:00","close_reason":"Merged to main (needs CommandRunner fix)","dependencies":[{"issue_id":"oro-ujb.4","depends_on_id":"oro-ujb","type":"parent-child","created_at":"2026-02-08T02:28:51.787733-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-ujb.5","title":"Wire dispatcher.Run into oro start --daemon-only","description":"Replace the '\u003c-shutdownCtx.Done()' placeholder in cmd_start.go daemon-only mode with actual dispatcher.New() + dispatcher.Run(). Wire in production BeadSource, WorktreeManager, Escalator, sqlite DB, merge.Coordinator, ops.Spawner. The dispatcher should listen on a UDS socket at ~/.oro/oro.sock. Acceptance: daemon-only mode starts real dispatcher loop. Test: verify dispatcher creates socket file and accepts connections.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:28:56.104386-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:55:04.203849-05:00","closed_at":"2026-02-08T02:55:04.203849-05:00","close_reason":"Wired dispatcher.Run into daemon-only mode with production BeadSource, WorktreeManager, Escalator, merge.Coordinator, ops.Spawner. Test verifies socket creation and connection.","dependencies":[{"issue_id":"oro-ujb.5","depends_on_id":"oro-ujb","type":"parent-child","created_at":"2026-02-08T02:28:56.105228-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb.5","depends_on_id":"oro-ujb.2","type":"blocks","created_at":"2026-02-08T02:29:06.945566-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb.5","depends_on_id":"oro-ujb.3","type":"blocks","created_at":"2026-02-08T02:29:07.048508-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb.5","depends_on_id":"oro-ujb.4","type":"blocks","created_at":"2026-02-08T02:29:07.144027-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-ujb.5","depends_on_id":"oro-ujb.6","type":"blocks","created_at":"2026-02-08T02:36:11.185214-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-ujb.6","title":"Fix: unify CommandRunner interfaces across beadsource/worktree_manager/escalator","description":"Three agents each declared their own CommandRunner interface in pkg/dispatcher/ with different signatures. Need to unify into one interface and fix all mock collisions in test files. beadsource.go: Run(ctx, name, args) ([]byte, error). worktree_manager.go: Run(ctx, dir, args) (string, string, error). escalator.go: Run(ctx, name, args) error. Fix: use the beadsource signature (most general) or create a unified interface. Then fix all test mocks.","status":"closed","priority":1,"issue_type":"bug","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T02:36:00.283136-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T02:39:26.275753-05:00","closed_at":"2026-02-08T02:39:26.275753-05:00","close_reason":"Unified CommandRunner to beadsource signature, fixed all test mocks","dependencies":[{"issue_id":"oro-ujb.6","depends_on_id":"oro-ujb","type":"parent-child","created_at":"2026-02-08T02:36:00.283885-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-us0","title":"Dispatcher: quality gate retry on failed DONE","description":"When dispatcher receives DONE with quality_gate_passed=false, it should re-assign the same bead to the same worker in the same worktree (retry). Per spec (lines 186-188): 'Worker sends DONE {quality_gate_passed: false} → Dispatcher re-sends ASSIGN for same bead+worktree (retry)'. Currently handleDone() does not check quality_gate_passed at all. Add: if \\!done.QualityGatePassed, re-send ASSIGN with same bead/worktree/model, do NOT merge or close. Add test.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T23:05:46.198831-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T00:02:01.918209-05:00","closed_at":"2026-02-09T00:02:01.918209-05:00","close_reason":"Quality gate retry verified + model preservation added with 8 tests"}
{"id":"oro-v6f","title":"Protocol: integration test — schema + types against real SQLite","description":"Integration test in pkg/protocol/integration_test.go. Exec schema DDL against in-memory SQLite, INSERT rows using Go structs, SELECT and scan back into structs. Test: go test ./pkg/protocol/... -run TestIntegration -v. Acceptance: all tables created, all row types insert and scan correctly.","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T17:30:38.336378-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T22:08:00.651078-05:00","closed_at":"2026-02-07T22:08:00.651078-05:00","close_reason":"Tests pass, gate clean. Commit: 832af31","dependencies":[{"issue_id":"oro-v6f","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T17:30:50.959945-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-6dq","type":"blocks","created_at":"2026-02-07T17:31:02.768351-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-q63","type":"blocks","created_at":"2026-02-07T17:31:02.851427-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-bya","type":"blocks","created_at":"2026-02-07T17:31:02.932647-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-v6f","depends_on_id":"oro-ef8","type":"blocks","created_at":"2026-02-07T17:31:03.014494-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-vhd","title":"Model routing: dispatcher selects Opus vs Sonnet per task","description":"Per lifecycle spec, dispatcher should pick Opus 4.6 for judgment-heavy work (complex merges, architectural review, diagnosis) and latest Sonnet for mechanical tasks (straightforward bead execution, clean reviews). Currently model is hardcoded or taken from bead. Add routing logic: if bead has model field set, use it. Otherwise, default to Sonnet for type=task, Opus for type=feature/bug or priority P0/P1. Acceptance: (1) beads with explicit model field use that model, (2) P0/P1 beads default to Opus, (3) regular tasks default to Sonnet.","status":"closed","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:34.642979-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T11:57:55.367623-05:00","closed_at":"2026-02-09T11:57:55.367623-05:00","close_reason":"Model routing implemented. Tests pass. Changes in commit 7294240 (bundled with bd-lar commit)."}
{"id":"oro-vqv","title":"oro logs [worker-id] — tail dispatcher event log","description":"CLI command to tail/query the dispatcher event log from SQLite events table. Optional worker-id filter. Useful for debugging running sessions without the TUI. Acceptance: Test: cmd/oro/cmd_logs_test.go:TestLogsCommand | Cmd: go test ./cmd/oro/... -run TestLogs | Assert: prints recent events, filters by worker-id","status":"open","priority":3,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T19:34:07.397255-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T19:34:07.397255-05:00"}
{"id":"oro-vuw","title":"Ralph handoff: context cycling with worker respawn in same worktree","description":"Implement ralph handoff loop per lifecycle spec Phase 4b. When worker context hits 70% threshold, Go binary injects prompt to write .oro/handoff.yaml, annotates bead with handoff summary, sends HANDOFF to dispatcher. Dispatcher sends SHUTDOWN to old worker, spawns fresh worker in SAME worktree (not a new one). Fresh worker reads handoff.yaml + bd show to continue. Acceptance: (1) worker detects 70% context and triggers handoff, (2) dispatcher respawns worker in same worktree with handoff context, (3) fresh worker continues from handoff state.","status":"closed","priority":1,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-09T10:08:07.836359-05:00","created_by":"Aakash Shah","updated_at":"2026-02-09T11:19:41.167079-05:00","closed_at":"2026-02-09T11:19:41.167079-05:00","close_reason":"Tests pass, full gate clean. Commit: b7a64af"}
{"id":"oro-w2u","title":"Spec: Code search system for Oro sessions (all roles)","description":"Spec out token-efficient code search for Oro. All three roles (Architect, Manager, Worker) get the same hook stack. CC-v3 reference analyzed — three layers: (1) TLDR read enforcer (intercepts Read, returns AST summary instead of raw file, 26-99% token savings), (2) Smart search router (intercepts Grep, classifies structural/literal/semantic, routes to best tool), (3) AST-grep for pattern matching. Plus optional semantic search (FAISS embeddings). Key decision: CC-v3 uses a TypeScript hook + Python TLDR daemon. Oro is Go-based — need to decide: port TLDR to Go, use tree-sitter in Go, or keep polyglot (Go wrapper + external tools). Workers rarely trigger upper layers but get full stack for simplicity. Reference: yap/reference/Continuous-Claude-v3/.claude/hooks/src/tldr-read-enforcer.ts and smart-search-router.ts","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T13:03:25.358562-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T18:42:33.478325-05:00","closed_at":"2026-02-07T18:42:33.478325-05:00","close_reason":"Spec written to docs/plans/2026-02-07-code-search-spec.md","dependencies":[{"issue_id":"oro-w2u","depends_on_id":"oro-o7r","type":"blocks","created_at":"2026-02-07T13:03:36.51987-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-w6n","title":"Implement: Dispatcher Go binary (UDS server + SQLite WAL + priority queue + worker supervisor)","description":"Was 'Manager daemon'. Manager is now a Claude session. This bead implements the Dispatcher — the Go binary that handles all mechanical coordination: UDS server for workers, SQLite for runtime state, priority queue from bd ready, worker lifecycle supervision, ops agent spawning, merge execution. Receives directives from Manager via SQLite commands table. Sends escalations to Manager via tmux send-keys. See docs/plans/2026-02-07-manager-redesign.md and docs/plans/2026-02-07-oro-lifecycle.md.","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-07T04:19:21.257108-05:00","created_by":"Aakash Shah","updated_at":"2026-02-07T23:12:21.122046-05:00","closed_at":"2026-02-07T23:12:21.122046-05:00","close_reason":"Dispatcher pkg built: UDS server, SQLite state, worker pool, priority queue, merge+ops integration, 19 tests, lint clean","dependencies":[{"issue_id":"oro-w6n","depends_on_id":"oro-1s7","type":"blocks","created_at":"2026-02-07T04:19:40.597348-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-o7r","type":"blocks","created_at":"2026-02-07T13:03:36.443153-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-2jb","type":"blocks","created_at":"2026-02-07T15:25:46.575303-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-68t","type":"blocks","created_at":"2026-02-07T15:26:11.607622-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-rue","type":"blocks","created_at":"2026-02-07T15:26:16.291574-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-w6n","depends_on_id":"oro-v6f","type":"blocks","created_at":"2026-02-07T17:31:58.345687-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-wn2","title":"Add model field to beads: default Opus, Sonnet for simple changes","description":"Add an optional 'model' field to bead metadata (e.g. in bd create --model=sonnet). Default to Opus for all beads unless explicitly set to Sonnet. Simple changes (typo fixes, config tweaks, single-file moves) should use Sonnet. Complex changes (new features, multi-file refactors, architecture) use Opus. Update bd show to display the model. Update worker spawn logic to pass the model to claude -p. Document the heuristic in CLAUDE.md or a skill.","acceptance_criteria":"Test: cmd/bd/create_test.go:TestCreateWithModel | Cmd: go test ./cmd/bd/ -run TestCreateWithModel -v | Assert: bd create --model=sonnet stores model field, bd show displays it, default is opus when omitted","status":"closed","priority":2,"issue_type":"feature","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T03:49:20.710901-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T11:01:42.18486-05:00","closed_at":"2026-02-08T11:01:42.18486-05:00","close_reason":"Added model field to Bead/BeadDetail/AssignPayload, worker passes --model to claude -p"}
{"id":"oro-yfs","title":"Wire memory extraction into worker (ExtractMarkers + ExtractImplicit on session output)","description":"Worker should capture memories from its subprocess stdout. Two integration points: (1) Pipe subprocess stdout through ExtractMarkers() to capture [MEMORY] lines in real-time. (2) On handoff/completion, run ExtractImplicit() on accumulated session text. Worker needs a memory.Store instance (passed via constructor or from dispatcher). Ref: pkg/worker/worker.go (subprocess management), pkg/memory/memory.go (ExtractMarkers, ExtractImplicit).","acceptance_criteria":"Test: pkg/worker/worker_test.go:TestWorkerExtractsMemories | Cmd: go test -race ./pkg/worker/... | Assert: worker with [MEMORY] lines in subprocess output creates memory rows; implicit patterns extracted on handoff","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-08T01:05:28.29789-05:00","created_by":"Aakash Shah","updated_at":"2026-02-08T01:57:29.760754-05:00","closed_at":"2026-02-08T01:57:29.760754-05:00","close_reason":"Wired memory extraction into worker: SubprocessSpawner returns stdout pipe, processOutput goroutine extracts [MEMORY] markers in real-time, extractImplicitMemories runs on handoff/done. All tests pass, 0 lint issues.","dependencies":[{"issue_id":"oro-yfs","depends_on_id":"oro-adw","type":"blocks","created_at":"2026-02-08T01:05:42.68188-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-zw5","title":"Session-end learning synthesis","description":"Surface undocumented learnings at session-transition moments (bead boundary, session end, git commit). Implements spec from docs/plans/2026-02-10-session-end-learning-synthesis.md.","acceptance_criteria":"All child beads closed. Full quality gate passes.","status":"open","priority":2,"issue_type":"epic","owner":"mraakashshah@users.noreply.github.com","created_at":"2026-02-10T13:33:05.31624-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T13:33:05.31624-05:00"}
{"id":"oro-zw5.1","title":"Frequency analysis library for knowledge.jsonl","description":"Shared Python module .claude/hooks/learning_analysis.py with: load_knowledge(path), filter_by_bead(entries, bead_id), filter_by_session(entries, since_ts), tag_frequency(entries), content_similarity(entries) using Jaccard on slugify tokens, frequency_level(count), cross_reference_docs(entries, discoveries_path). Reuses slugify() from memory_capture.py. No external deps.","acceptance_criteria":"Test: .claude/hooks/test_learning_analysis.py:test_tag_frequency | Cmd: uv run pytest .claude/hooks/test_learning_analysis.py -v | Assert: tag_frequency returns correct counts; content_similarity clusters near-duplicates; frequency_level maps 1=note 2=consider 3+=create","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":7,"created_at":"2026-02-10T13:33:22.664225-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T13:43:41.867627-05:00","closed_at":"2026-02-10T13:43:41.867627-05:00","close_reason":"Tests pass, quality gate clean (Go flaky test pre-existing)","dependencies":[{"issue_id":"oro-zw5.1","depends_on_id":"oro-zw5","type":"parent-child","created_at":"2026-02-10T13:33:22.666313-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-zw5.2","title":"Update create-handoff skill with learning synthesis step","description":"Add new Step 3.5 between Field Guide and Capture Learnings in create-handoff SKILL.md. The step instructs the agent to: (1) read .beads/memory/knowledge.jsonl, (2) filter entries by beads worked this session, (3) cross-reference with docs/decisions-and-discoveries.md, (4) run frequency analysis across all entries, (5) detect cross-bead patterns, (6) add learnings: field to handoff YAML with undocumented entries and proposed_codification targets per decision tree.","acceptance_criteria":"Test: manual | Cmd: grep -c 'Undocumented Learnings' .claude/skills/create-handoff/SKILL.md | Assert: returns 1 (section exists)","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-10T13:33:27.832372-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T13:43:21.419183-05:00","closed_at":"2026-02-10T13:43:21.419183-05:00","close_reason":"Skill updated with learning synthesis step","dependencies":[{"issue_id":"oro-zw5.2","depends_on_id":"oro-zw5","type":"parent-child","created_at":"2026-02-10T13:33:27.834175-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-zw5.3","title":"Update context-checkpoint skill with learning checkpoint","description":"Add Learning Checkpoint section to context-checkpoint SKILL.md. After bead completion and before zone check, instruct the agent to: (1) scan knowledge.jsonl for entries matching completed bead ID, (2) query tag frequency across all entries, (3) if 3+ frequency hit, propose codification per decision tree (sequence-\u003eskill, event-\u003ehook, heuristic-\u003erule, solved-problem-\u003esolution-doc), (4) if learnings exist only in knowledge.jsonl not in memory store, propose oro remember promotion.","acceptance_criteria":"Test: manual | Cmd: grep -c 'Learning Checkpoint' .claude/skills/context-checkpoint/SKILL.md | Assert: returns 1 (section exists)","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":5,"created_at":"2026-02-10T13:33:32.451467-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T13:43:21.378193-05:00","closed_at":"2026-02-10T13:43:21.378193-05:00","close_reason":"Skill updated with learning checkpoint section","dependencies":[{"issue_id":"oro-zw5.3","depends_on_id":"oro-zw5","type":"parent-child","created_at":"2026-02-10T13:33:32.453217-05:00","created_by":"Aakash Shah"}]}
{"id":"oro-zw5.4","title":"Git commit PostToolUse hook for learning reminders","description":"New Python hook .claude/hooks/learning_reminder.py. PostToolUse on Bash. Parses git commit message for bead reference (bd-xyz). If found, calls learning_analysis.filter_by_bead() to check for undocumented learnings. If entries exist, injects additionalContext reminder: 'N undocumented learnings for bead \u003cid\u003e. Consider adding to decisions-and-discoveries.md or running oro remember.' Zero output for non-commit commands or when no learnings exist.","acceptance_criteria":"Test: .claude/hooks/test_learning_reminder.py:test_commit_with_bead_surfaces_learnings | Cmd: uv run pytest .claude/hooks/test_learning_reminder.py -v | Assert: git commit with bead ref injects reminder when LEARNED entries exist; no output when no entries; non-commit commands produce no output","status":"closed","priority":2,"issue_type":"task","owner":"mraakashshah@users.noreply.github.com","estimated_minutes":7,"created_at":"2026-02-10T13:33:37.245559-05:00","created_by":"Aakash Shah","updated_at":"2026-02-10T13:55:51.79646-05:00","closed_at":"2026-02-10T13:55:51.79646-05:00","close_reason":"Tests pass, quality gate clean (Python tiers), hook registered","dependencies":[{"issue_id":"oro-zw5.4","depends_on_id":"oro-zw5","type":"parent-child","created_at":"2026-02-10T13:33:37.247961-05:00","created_by":"Aakash Shah"},{"issue_id":"oro-zw5.4","depends_on_id":"oro-zw5.1","type":"blocks","created_at":"2026-02-10T13:33:49.672681-05:00","created_by":"Aakash Shah"}]}
